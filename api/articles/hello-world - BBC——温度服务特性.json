{"title":"BBC———服务与特性","slug":"hello-world - BBC——温度服务特性","date":"2020-06-19T01:38:53.757Z","updated":"2020-06-19T07:58:22.987Z","comments":true,"path":"api/articles/hello-world - BBC——温度服务特性.json","photos":[],"link":"","excerpt":"","covers":["http://qarz21mhq.bkt.clouddn.com/93.jpg","http://qarz21mhq.bkt.clouddn.com/20200619103450.png","http://qarz21mhq.bkt.clouddn.com/20200619152624.png","http://qarz21mhq.bkt.clouddn.com/20200619153353.png"],"content":"<p><img src=\"http://qarz21mhq.bkt.clouddn.com/93.jpg\" alt=\"\"></p>\n<h2 id=\"添加蓝牙服务与特性\"><a href=\"#添加蓝牙服务与特性\" class=\"headerlink\" title=\"添加蓝牙服务与特性\"></a>添加蓝牙服务与特性</h2><h3 id=\"首先定义变量\"><a href=\"#首先定义变量\" class=\"headerlink\" title=\"首先定义变量\"></a>首先定义变量</h3><div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"PLAIN\"><figure class=\"iseeu highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">var has_accelerometer_service &#x3D; false; </span><br><span class=\"line\">var has_accelerometer_data &#x3D; false; </span><br><span class=\"line\">var has_led_service &#x3D; false;</span><br><span class=\"line\">var has_temp_serve&#x3D;false;</span><br><span class=\"line\">var has_led_matrix_state &#x3D; false; </span><br><span class=\"line\">var has_device_information_service &#x3D; false;</span><br><span class=\"line\">var has_model_name_string &#x3D; false; </span><br><span class=\"line\">var has_temp_value &#x3D;false;</span><br></pre></td></tr></table></figure></div>\n\n<h3 id=\"其次进行赋值\"><a href=\"#其次进行赋值\" class=\"headerlink\" title=\"其次进行赋值\"></a>其次进行赋值</h3><div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"PLAIN\"><figure class=\"iseeu highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#x2F;&#x2F; service UUIDs </span><br><span class=\"line\">TEMP_SERVE&#x3D;E95D6100251D470AA062FA1922DFA9A8;</span><br><span class=\"line\">ACCELEROMETER_SERVICE &#x3D; &#39;e95d0753-251d-470a-a062-fa1922dfa9a8&#39;; </span><br><span class=\"line\">LED_SERVICE &#x3D; &#39;e95dd91d-251d-470a-a062-fa1922dfa9a8&#39;; </span><br><span class=\"line\">DEVICE_INFORMATION_SERVICE &#x3D; &#39;0000180a-0000-1000-8000-00805f9b34fb&#39;;</span><br><span class=\"line\">TEMPERATURE_SERVICE &#x3D;&#39;e95d6100-251d-470a-a062-fa1922dfa9a8&#39;; </span><br><span class=\"line\"></span><br><span class=\"line\">&#x2F;&#x2F; characteristic UUIDs </span><br><span class=\"line\">TEMP_VALUE&#x3D;E95D6100251D470AA062FA1922DFA9A8;</span><br><span class=\"line\">ACCELEROMETER_DATA &#x3D; &#39;e95dca4b-251d-470a-a062-fa1922dfa9a8&#39;; </span><br><span class=\"line\">LED_MATRIX_STATE  &#x3D; &#39;e95d7b77-251d-470a-a062-fa1922dfa9a8&#39;; </span><br><span class=\"line\">LED_TEXT&#x3D;&#39;e95d93ee-251d-470a-a062-fa1922dfa9a8&#39;  &#x2F;&#x2F;新加的led_text特性相关语句</span><br></pre></td></tr></table></figure></div>\n\n<p>其中，TEMP_SERVE的值</p>\n<p>可以在<a href=\"https://lancaster-university.github.io/microbit-docs/resources/bluetooth/bluetooth_profile.html\" target=\"_blank\" rel=\"noopener\">https://lancaster-university.github.io/microbit-docs/resources/bluetooth/bluetooth_profile.html</a>  网页中进行搜索</p>\n<p>键盘按住 ctrl+f 并回车 ，搜素框中输入temperature service，就能看见uuid号</p>\n<p><img src=\"http://qarz21mhq.bkt.clouddn.com/20200619103450.png\" alt=\"\"></p>\n<h3 id=\"然后添加条件判断\"><a href=\"#然后添加条件判断\" class=\"headerlink\" title=\"然后添加条件判断\"></a>然后添加条件判断</h3><div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"PLAIN\"><figure class=\"iseeu highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">services.forEach(service &#x3D;&gt; </span><br><span class=\"line\">&#123;     </span><br><span class=\"line\">\tif (service.uuid &#x3D;&#x3D; ACCELEROMETER_SERVICE)</span><br><span class=\"line\">    &#123;      </span><br><span class=\"line\">    \thas_accelerometer_service &#x3D; true;    </span><br><span class=\"line\">     &#125;   </span><br><span class=\"line\">     if (service.uuid &#x3D;&#x3D; LED_SERVICE) </span><br><span class=\"line\">     &#123;      </span><br><span class=\"line\">         has_led_service &#x3D; true;     </span><br><span class=\"line\">     &#125;     </span><br><span class=\"line\">     if (service.uuid &#x3D;&#x3D; DEVICE_INFORMATION_SERVICE) </span><br><span class=\"line\">     &#123;      </span><br><span class=\"line\">          has_device_information_service &#x3D; true;     </span><br><span class=\"line\">      &#125; </span><br><span class=\"line\">      if (service.uuid &#x3D;&#x3D; TEMPERATURE_SERVICE) &#x2F;&#x2F;温度</span><br><span class=\"line\">      &#123;      </span><br><span class=\"line\">           has_temperature_service &#x3D; true;     </span><br><span class=\"line\">\t  &#125;</span><br></pre></td></tr></table></figure></div>\n\n<h3 id=\"再进行修改特性\"><a href=\"#再进行修改特性\" class=\"headerlink\" title=\"再进行修改特性\"></a>再进行修改特性</h3><div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"PLAIN\"><figure class=\"iseeu highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">if (characteristic.uuid &#x3D;&#x3D; TEMP_VALUE) </span><br><span class=\"line\">&#123;        </span><br><span class=\"line\">\ttemp_data &#x3D;characteristic;        </span><br><span class=\"line\">\thas_temp_value &#x3D; true;       </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></div>\n\n<h2 id=\"关于温度服务\"><a href=\"#关于温度服务\" class=\"headerlink\" title=\"关于温度服务\"></a>关于温度服务</h2><h3 id=\"打开网址https-makecode-microbit-org-89975-20684-84568-20127\"><a href=\"#打开网址https-makecode-microbit-org-89975-20684-84568-20127\" class=\"headerlink\" title=\"打开网址https://makecode.microbit.org/89975-20684-84568-20127\"></a>打开网址<a href=\"https://makecode.microbit.org/89975-20684-84568-20127\" target=\"_blank\" rel=\"noopener\">https://makecode.microbit.org/89975-20684-84568-20127</a></h3><p><img src=\"http://qarz21mhq.bkt.clouddn.com/20200619152624.png\" alt=\"\"></p>\n<h3 id=\"点击蓝牙led服务-点击下载\"><a href=\"#点击蓝牙led服务-点击下载\" class=\"headerlink\" title=\"点击蓝牙led服务  点击下载\"></a>点击蓝牙led服务  点击下载</h3><p><img src=\"http://qarz21mhq.bkt.clouddn.com/20200619153353.png\" alt=\"\"></p>\n<h3 id=\"把下载后的文件拖到存储盘里\"><a href=\"#把下载后的文件拖到存储盘里\" class=\"headerlink\" title=\"把下载后的文件拖到存储盘里\"></a>把下载后的文件拖到存储盘里</h3><h3 id=\"然后以谷歌浏览器方式打开代码文件\"><a href=\"#然后以谷歌浏览器方式打开代码文件\" class=\"headerlink\" title=\"然后以谷歌浏览器方式打开代码文件\"></a>然后以谷歌浏览器方式打开代码文件</h3>","categories":[],"tags":[]}