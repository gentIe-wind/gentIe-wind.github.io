{"total":14,"pageSize":10,"pageCount":2,"data":[{"title":"BBC———控制多行","slug":"hello-world - BBC——控制多行","date":"2020-06-25T10:42:13.266Z","updated":"2020-06-25T10:58:24.687Z","comments":true,"pin":null,"path":"api/articles/hello-world - BBC——控制多行.json","excerpt":"","keywords":null,"cover":"http://qarz21mhq.bkt.clouddn.com/93.jpg","content":"<p><img src=\"http://qarz21mhq.bkt.clouddn.com/93.jpg\" alt=\"\"></p>\n<p>我们用网页控制BBC开发板的led点阵，方法是运用数组</p>\n<p>代码如下：</p>\n<div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"PLAIN\"><figure class=\"iseeu highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br><span class=\"line\">210</span><br><span class=\"line\">211</span><br><span class=\"line\">212</span><br><span class=\"line\">213</span><br><span class=\"line\">214</span><br><span class=\"line\">215</span><br><span class=\"line\">216</span><br><span class=\"line\">217</span><br><span class=\"line\">218</span><br><span class=\"line\">219</span><br><span class=\"line\">220</span><br><span class=\"line\">221</span><br><span class=\"line\">222</span><br><span class=\"line\">223</span><br><span class=\"line\">224</span><br><span class=\"line\">225</span><br><span class=\"line\">226</span><br><span class=\"line\">227</span><br><span class=\"line\">228</span><br><span class=\"line\">229</span><br><span class=\"line\">230</span><br><span class=\"line\">231</span><br><span class=\"line\">232</span><br><span class=\"line\">233</span><br><span class=\"line\">234</span><br><span class=\"line\">235</span><br><span class=\"line\">236</span><br><span class=\"line\">237</span><br><span class=\"line\">238</span><br><span class=\"line\">239</span><br><span class=\"line\">240</span><br><span class=\"line\">241</span><br><span class=\"line\">242</span><br><span class=\"line\">243</span><br><span class=\"line\">244</span><br><span class=\"line\">245</span><br><span class=\"line\">246</span><br><span class=\"line\">247</span><br><span class=\"line\">248</span><br><span class=\"line\">249</span><br><span class=\"line\">250</span><br><span class=\"line\">251</span><br><span class=\"line\">252</span><br><span class=\"line\">253</span><br><span class=\"line\">254</span><br><span class=\"line\">255</span><br><span class=\"line\">256</span><br><span class=\"line\">257</span><br><span class=\"line\">258</span><br><span class=\"line\">259</span><br><span class=\"line\">260</span><br><span class=\"line\">261</span><br><span class=\"line\">262</span><br><span class=\"line\">263</span><br><span class=\"line\">264</span><br><span class=\"line\">265</span><br><span class=\"line\">266</span><br><span class=\"line\">267</span><br><span class=\"line\">268</span><br><span class=\"line\">269</span><br><span class=\"line\">270</span><br><span class=\"line\">271</span><br><span class=\"line\">272</span><br><span class=\"line\">273</span><br><span class=\"line\">274</span><br><span class=\"line\">275</span><br><span class=\"line\">276</span><br><span class=\"line\">277</span><br><span class=\"line\">278</span><br><span class=\"line\">279</span><br><span class=\"line\">280</span><br><span class=\"line\">281</span><br><span class=\"line\">282</span><br><span class=\"line\">283</span><br><span class=\"line\">284</span><br><span class=\"line\">285</span><br><span class=\"line\">286</span><br><span class=\"line\">287</span><br><span class=\"line\">288</span><br><span class=\"line\">289</span><br><span class=\"line\">290</span><br><span class=\"line\">291</span><br><span class=\"line\">292</span><br><span class=\"line\">293</span><br><span class=\"line\">294</span><br><span class=\"line\">295</span><br><span class=\"line\">296</span><br><span class=\"line\">297</span><br><span class=\"line\">298</span><br><span class=\"line\">299</span><br><span class=\"line\">300</span><br><span class=\"line\">301</span><br><span class=\"line\">302</span><br><span class=\"line\">303</span><br><span class=\"line\">304</span><br><span class=\"line\">305</span><br><span class=\"line\">306</span><br><span class=\"line\">307</span><br><span class=\"line\">308</span><br><span class=\"line\">309</span><br><span class=\"line\">310</span><br><span class=\"line\">311</span><br><span class=\"line\">312</span><br><span class=\"line\">313</span><br><span class=\"line\">314</span><br><span class=\"line\">315</span><br><span class=\"line\">316</span><br><span class=\"line\">317</span><br><span class=\"line\">318</span><br><span class=\"line\">319</span><br><span class=\"line\">320</span><br><span class=\"line\">321</span><br><span class=\"line\">322</span><br><span class=\"line\">323</span><br><span class=\"line\">324</span><br><span class=\"line\">325</span><br><span class=\"line\">326</span><br><span class=\"line\">327</span><br><span class=\"line\">328</span><br><span class=\"line\">329</span><br><span class=\"line\">330</span><br><span class=\"line\">331</span><br><span class=\"line\">332</span><br><span class=\"line\">333</span><br><span class=\"line\">334</span><br><span class=\"line\">335</span><br><span class=\"line\">336</span><br><span class=\"line\">337</span><br><span class=\"line\">338</span><br><span class=\"line\">339</span><br><span class=\"line\">340</span><br><span class=\"line\">341</span><br><span class=\"line\">342</span><br><span class=\"line\">343</span><br><span class=\"line\">344</span><br><span class=\"line\">345</span><br><span class=\"line\">346</span><br><span class=\"line\">347</span><br><span class=\"line\">348</span><br><span class=\"line\">349</span><br><span class=\"line\">350</span><br><span class=\"line\">351</span><br><span class=\"line\">352</span><br><span class=\"line\">353</span><br><span class=\"line\">354</span><br><span class=\"line\">355</span><br><span class=\"line\">356</span><br><span class=\"line\">357</span><br><span class=\"line\">358</span><br><span class=\"line\">359</span><br><span class=\"line\">360</span><br><span class=\"line\">361</span><br><span class=\"line\">362</span><br><span class=\"line\">363</span><br><span class=\"line\">364</span><br><span class=\"line\">365</span><br><span class=\"line\">366</span><br><span class=\"line\">367</span><br><span class=\"line\">368</span><br><span class=\"line\">369</span><br><span class=\"line\">370</span><br><span class=\"line\">371</span><br><span class=\"line\">372</span><br><span class=\"line\">373</span><br><span class=\"line\">374</span><br><span class=\"line\">375</span><br><span class=\"line\">376</span><br><span class=\"line\">377</span><br><span class=\"line\">378</span><br><span class=\"line\">379</span><br><span class=\"line\">380</span><br><span class=\"line\">381</span><br><span class=\"line\">382</span><br><span class=\"line\">383</span><br><span class=\"line\">384</span><br><span class=\"line\">385</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;html&gt;</span><br><span class=\"line\">    &lt;head&gt;</span><br><span class=\"line\">        &lt;script&gt;</span><br><span class=\"line\">        var    selected_device; &#x2F;&#x2F;选择设备</span><br><span class=\"line\">        var    connected_server; &#x2F;&#x2F;连接设备</span><br><span class=\"line\">        var    connected&#x3D;false;&#x2F;&#x2F;连接状态</span><br><span class=\"line\">        var    services_discovered&#x3D;false;&#x2F;&#x2F;发现设备状态</span><br><span class=\"line\">        &#x2F;&#x2F; 添加服务和特性状态变量 </span><br><span class=\"line\">        var has_accelerometer_service &#x3D; false; &#x2F;&#x2F;加速度服务状态</span><br><span class=\"line\">        var has_accelerometer_data &#x3D; false; &#x2F;&#x2F;加速度特性状态</span><br><span class=\"line\">        var has_led_service &#x3D; false;&#x2F;&#x2F;led服务状态</span><br><span class=\"line\">        var has_led_matrix_state &#x3D; false; &#x2F;&#x2F;led控制特性状态</span><br><span class=\"line\">        var has_device_information_service &#x3D; false; &#x2F;&#x2F;设备信息服务状态</span><br><span class=\"line\">        var has_model_name_string &#x3D; false; &#x2F;&#x2F;设备信息特性状态</span><br><span class=\"line\">        var has_temperature_service &#x3D;false;    &#x2F;&#x2F;温度服务状态</span><br><span class=\"line\">        var has_tem_temperature &#x3D; false;  &#x2F;&#x2F;温度特性状态</span><br><span class=\"line\">         &#x2F;&#x2F; 服务 UUIDs </span><br><span class=\"line\">       ACCELEROMETER_SERVICE &#x3D; &#39;e95d0753-251d-470a-a062-fa1922dfa9a8&#39;; </span><br><span class=\"line\">       LED_SERVICE &#x3D; &#39;e95dd91d-251d-470a-a062-fa1922dfa9a8&#39;; </span><br><span class=\"line\">       DEVICE_INFORMATION_SERVICE &#x3D; &#39;0000180a-0000-1000-8000-00805f9b34fb&#39;;</span><br><span class=\"line\">       TEMPERATURE_SERVICE &#x3D; &#39;e95d6100-251d-470a-a062-fa1922dfa9a8&#39;; </span><br><span class=\"line\">       &#x2F;&#x2F; 特性 UUIDs </span><br><span class=\"line\">       ACCELEROMETER_DATA &#x3D; &#39;e95dca4b-251d-470a-a062-fa1922dfa9a8&#39;; </span><br><span class=\"line\">       LED_MATRIX_STATE  &#x3D; &#39;e95d7b77-251d-470a-a062-fa1922dfa9a8&#39;; </span><br><span class=\"line\">       MODEL_NUMBER_STRING &#x3D; &#39;00002a24-0000-1000-8000-00805f9b34fb&#39;;</span><br><span class=\"line\">       TEM_TEMPERATURE &#x3D; &#39;e95d1b25-251d-470a-a062-fa1922dfa9a8&#39;;  </span><br><span class=\"line\">       &#x2F;&#x2F; 添加特性变量 </span><br><span class=\"line\">       var led_matrix_state; </span><br><span class=\"line\">        var model_number_string;</span><br><span class=\"line\">        var accelerometer_data;</span><br><span class=\"line\">        var tem_temperature;    </span><br><span class=\"line\">          &#x2F;&#x2F;添加服务，特性相关参数</span><br><span class=\"line\">        var service_count;</span><br><span class=\"line\">         var services_discovered;</span><br><span class=\"line\">         var characteristics_discovered;  </span><br><span class=\"line\">         var characteristic_count ;               </span><br><span class=\"line\">         function discoverOrdisconnectDevices()&#x2F;&#x2F; 断开连接</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            console.log(&quot;discoverOrdisconnectDevices&quot;);</span><br><span class=\"line\">            if(!connected)</span><br><span class=\"line\">            discoverDevices();</span><br><span class=\"line\">            else</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                selected_device.gatt.disconnect();</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        </span><br><span class=\"line\">        function onDisconnected()&#x2F;&#x2F;连接</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            console.log(&quot;onDisconnected&quot;);</span><br><span class=\"line\">            resetUI();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">\t\t&#x2F;&#x2F;function input.temperature(): number;</span><br><span class=\"line\">        function discoverDevices()&#x2F;&#x2F; 搜索设备函数</span><br><span class=\"line\">        &#123; </span><br><span class=\"line\">            console.log(&quot;discoverDevices&quot;);</span><br><span class=\"line\">            var options &#x3D; &#123;acceptAllDevices:true,</span><br><span class=\"line\">                optionalServices: [DEVICE_INFORMATION_SERVICE, ACCELEROMETER_SERVICE, LED_SERVICE,TEMPERATURE_SERVICE]  &#x2F;&#x2F;在第5节课上添加</span><br><span class=\"line\">            &#125;        &#x2F;&#x2F;发现所有周边蓝牙设备</span><br><span class=\"line\">           </span><br><span class=\"line\">            navigator.bluetooth.requestDevice(options)</span><br><span class=\"line\">            .then(device &#x3D;&gt; &#123;</span><br><span class=\"line\">                console.log(&#39;&gt; Name:&#39; + device.name);</span><br><span class=\"line\">                console.log(&#39;&gt; Id:&#39; + device.id);</span><br><span class=\"line\">                console.log(&#39;&gt; Connected:&#39; + device.gatt.connected);</span><br><span class=\"line\">                selected_device &#x3D; device;</span><br><span class=\"line\">                console.log(selected_device);</span><br><span class=\"line\">                connect();</span><br><span class=\"line\">                &#125;)</span><br><span class=\"line\">            .catch(error &#x3D;&gt; &#123;</span><br><span class=\"line\">                alert(&#39;ERROR&#39; +error);</span><br><span class=\"line\">                console.log(&#39;ERROR&#39; +error);</span><br><span class=\"line\">                &#125;);       </span><br><span class=\"line\">        &#125;       </span><br><span class=\"line\">        function connect()\t&#x2F;&#x2F;连接函数</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            console.log(&quot;connecting&quot;);</span><br><span class=\"line\">            selected_device.gatt.connect()</span><br><span class=\"line\">            .then(</span><br><span class=\"line\">                function (server)</span><br><span class=\"line\">                &#123;</span><br><span class=\"line\">                    console.log(&quot;Connected to&quot; + server.device.id);</span><br><span class=\"line\">                    console.log(&quot;Connected &quot; + server.connected);</span><br><span class=\"line\">                    selected_device.addEventListener(&#39;gattserverdisconnected&#39;,onDisconnected);</span><br><span class=\"line\">                    connected_server &#x3D;server;</span><br><span class=\"line\">                    discoverSvcsAndChars(); &#x2F;&#x2F;在第5课基础上添加的函数</span><br><span class=\"line\">                    setConnectedStatus(true);</span><br><span class=\"line\">                &#125;,</span><br><span class=\"line\">                function (error)</span><br><span class=\"line\">                &#123;</span><br><span class=\"line\">                    console.log(&quot;ERROR:could not connct-&quot; + error);</span><br><span class=\"line\">                   alert(&quot;ERROR:could not connct-&quot; + error);</span><br><span class=\"line\">                   setConnectedStatus(false);</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            );</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        function setConnectedStatus(status)&#x2F;&#x2F;设置连接状态</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            connected&#x3D;status;</span><br><span class=\"line\">            document.getElementById(&#39;status_connected&#39;).innerHTML &#x3D; status;</span><br><span class=\"line\">            if(status&#x3D;&#x3D;true)</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                document.getElementById(&#39;btn_scan&#39;).innerHTML &#x3D; &quot;Disconnect&quot;;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            else</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                document.getElementById(&#39;btn_scan&#39;).innerHTML &#x3D; &quot;Discover Devices&quot;;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        function setDiscoveryStatus(status)&#x2F;&#x2F;设置发现状态</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            services_discovered&#x3D;status;</span><br><span class=\"line\">            document.getElementById(&#39;status_discovered&#39;).innerHTML&#x3D;status;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        function resetUI()\t&#x2F;&#x2F;重置页面</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            setConnectedStatus(false);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        </span><br><span class=\"line\">        function discoverSvcsAndChars()    &#x2F;&#x2F;发现服务和特性</span><br><span class=\"line\">        &#123;  </span><br><span class=\"line\">            console.log(&quot;discoverSvcsAndChars server&#x3D;&quot; + connected_server); </span><br><span class=\"line\">            connected_server.getPrimaryServices()</span><br><span class=\"line\">            .then(services &#x3D;&gt; </span><br><span class=\"line\">            &#123;    </span><br><span class=\"line\">                    has_accelerometer_service &#x3D; false;    </span><br><span class=\"line\">                    has_led_service &#x3D; false;    </span><br><span class=\"line\">                    has_device_information_service &#x3D; false; </span><br><span class=\"line\">                    has_temperature_service&#x3D; false;</span><br><span class=\"line\"></span><br><span class=\"line\">                    services_discovered &#x3D; 0;    </span><br><span class=\"line\">                    service_count &#x3D; services.length;    </span><br><span class=\"line\">                    console.log(&quot;Got &quot; + service_count + &quot; services&quot;); </span><br><span class=\"line\">        </span><br><span class=\"line\">                    services.forEach(service &#x3D;&gt; </span><br><span class=\"line\">                    &#123;     </span><br><span class=\"line\">                        if (service.uuid &#x3D;&#x3D; ACCELEROMETER_SERVICE)</span><br><span class=\"line\">                        &#123;      </span><br><span class=\"line\">                            has_accelerometer_service &#x3D; true;    </span><br><span class=\"line\">                        &#125;   </span><br><span class=\"line\">                        if (service.uuid &#x3D;&#x3D; LED_SERVICE) </span><br><span class=\"line\">                        &#123;      </span><br><span class=\"line\">                            has_led_service &#x3D; true;     </span><br><span class=\"line\">                        &#125;     </span><br><span class=\"line\">                       if (service.uuid &#x3D;&#x3D; DEVICE_INFORMATION_SERVICE) </span><br><span class=\"line\">                        &#123;      </span><br><span class=\"line\">                            has_device_information_service &#x3D; true;     </span><br><span class=\"line\">                        &#125; </span><br><span class=\"line\">                        if (service.uuid &#x3D;&#x3D; TEMPERATURE_SERVICE) &#x2F;&#x2F;温度</span><br><span class=\"line\">                        &#123;      </span><br><span class=\"line\">                            has_temperature_service &#x3D; true;     </span><br><span class=\"line\">                        &#125;        </span><br><span class=\"line\">                        console.log(&#39;Getting Characteristics for service &#39; + service.uuid);     </span><br><span class=\"line\">                        service.getCharacteristics()</span><br><span class=\"line\">                        .then(characteristics &#x3D;&gt; </span><br><span class=\"line\">                        &#123;      </span><br><span class=\"line\">                            console.log(&#39;&gt; Service: &#39; + service.uuid);      </span><br><span class=\"line\">                            services_discovered++;     </span><br><span class=\"line\">                            characteristics_discovered &#x3D; 0;      </span><br><span class=\"line\">                            characteristic_count &#x3D; characteristics.length;      </span><br><span class=\"line\">                            characteristics.forEach(characteristic &#x3D;&gt; </span><br><span class=\"line\">                            &#123;       </span><br><span class=\"line\">                                characteristics_discovered++;       </span><br><span class=\"line\">                                console.log(&#39;&gt;&gt; Characteristic: &#39; + characteristic.uuid);       </span><br><span class=\"line\">                                if (characteristic.uuid &#x3D;&#x3D; ACCELEROMETER_DATA)</span><br><span class=\"line\">                                &#123;        </span><br><span class=\"line\">                                    accelerometer_data &#x3D; characteristic;        </span><br><span class=\"line\">                                    has_accelerometer_data &#x3D; true;       </span><br><span class=\"line\">                                &#125;      </span><br><span class=\"line\">                                if (characteristic.uuid &#x3D;&#x3D; LED_MATRIX_STATE) </span><br><span class=\"line\">                                &#123;        </span><br><span class=\"line\">                                    led_matrix_state &#x3D; characteristic;        </span><br><span class=\"line\">                                    has_led_matrix_state &#x3D; true;       </span><br><span class=\"line\">                                &#125;       </span><br><span class=\"line\">                                if (characteristic.uuid &#x3D;&#x3D; MODEL_NUMBER_STRING) </span><br><span class=\"line\">                                &#123;        </span><br><span class=\"line\">                                    model_number_string &#x3D; characteristic;        </span><br><span class=\"line\">                                    has_model_name_string &#x3D; true;       </span><br><span class=\"line\">                                &#125;</span><br><span class=\"line\">                                if(characteristic.uuid &#x3D;&#x3D; TEM_TEMPERATURE)  &#x2F;&#x2F;温度</span><br><span class=\"line\">                                &#123;</span><br><span class=\"line\">                                    tem_temperature &#x3D; characteristic; </span><br><span class=\"line\">                                    has_tem_temperature &#x3D; true;</span><br><span class=\"line\">                                &#125;     </span><br><span class=\"line\">                                if (services_discovered &#x3D;&#x3D; service_count &amp;&amp; characteristics_discovered &#x3D;&#x3D; characteristic_count) </span><br><span class=\"line\">                                &#123;        </span><br><span class=\"line\">                                    console.log(&quot;FINISHED DISCOVERY&quot;); </span><br><span class=\"line\">                                    setDiscoveryStatus(true);       </span><br><span class=\"line\">                                    &#x2F;&#x2F;setDiscoveryStatus(true);                  </span><br><span class=\"line\">                                &#125;    </span><br><span class=\"line\">                            &#125;);     </span><br><span class=\"line\">                        &#125;);    </span><br><span class=\"line\">                    &#125;);  </span><br><span class=\"line\">            &#125;);</span><br><span class=\"line\">        &#125;  </span><br><span class=\"line\">\t\tvar i&#x3D;0,j&#x3D;0;</span><br><span class=\"line\">        function randomLEDs(ct)   &#x2F;&#x2F;控制led</span><br><span class=\"line\">        &#123;  </span><br><span class=\"line\">            console.log(&quot;randomLEDs&quot;);   </span><br><span class=\"line\">            &#x2F;&#x2F; state validation   </span><br><span class=\"line\">            if (!connected) </span><br><span class=\"line\">            &#123;     </span><br><span class=\"line\">                alert(&quot;Error: Discover and connect to a device before using this function&quot;);     </span><br><span class=\"line\">                return;   </span><br><span class=\"line\">            &#125;   </span><br><span class=\"line\">            if (!services_discovered) </span><br><span class=\"line\">            &#123;     </span><br><span class=\"line\">                alert(&quot;Error: Service discovery has not yet completed&quot;);     </span><br><span class=\"line\">                return;  </span><br><span class=\"line\">            &#125;   </span><br><span class=\"line\">            if (!has_led_service) </span><br><span class=\"line\">            &#123;     </span><br><span class=\"line\">                alert(&quot;Error: The connected device does not contain the LED service&quot;);     </span><br><span class=\"line\">                return;  </span><br><span class=\"line\">            &#125;   </span><br><span class=\"line\">            if (!has_led_matrix_state) </span><br><span class=\"line\">            &#123;      </span><br><span class=\"line\">                alert(&quot;Error: The connected device does not contain the LED matrix state characteristic&quot;);      </span><br><span class=\"line\">                return;   </span><br><span class=\"line\">            &#125;   </span><br><span class=\"line\">\t\t\tvar led_array&#x3D;[];</span><br><span class=\"line\">\t\t\tif(ct&#x3D;&#x3D;0)</span><br><span class=\"line\">\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\t led_array[0] &#x3D;\t1&lt;&lt;i;</span><br><span class=\"line\">\t\t\t\t led_array[1] &#x3D; 1&lt;&lt;i;   </span><br><span class=\"line\">\t\t\t\t led_array[2] &#x3D; 1&lt;&lt;i;   </span><br><span class=\"line\">\t\t\t\t led_array[3] &#x3D; 1&lt;&lt;i;   </span><br><span class=\"line\">\t\t\t\t led_array[4] &#x3D; 1&lt;&lt;i;</span><br><span class=\"line\">\t\t\t\t i++;</span><br><span class=\"line\">\t\t\t\t if(i&#x3D;&#x3D;5)i&#x3D;0;</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t\telse if(ct&#x3D;&#x3D;1)</span><br><span class=\"line\">\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\tled_array[0] &#x3D; 0;</span><br><span class=\"line\">\t\t\t\tled_array[1] &#x3D; 0;   </span><br><span class=\"line\">\t\t\t\tled_array[2] &#x3D; 0;   </span><br><span class=\"line\">\t\t\t\tled_array[3] &#x3D; 0;   </span><br><span class=\"line\">\t\t\t\tled_array[4] &#x3D; 0;</span><br><span class=\"line\">\t\t\t\tled_array[j] &#x3D; 31;</span><br><span class=\"line\">\t\t\t\tj++;</span><br><span class=\"line\">\t\t\t\tif(j&#x3D;&#x3D;5)j&#x3D;0;</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t\t </span><br><span class=\"line\"></span><br><span class=\"line\">             &#x2F;&#x2F; Math.random():0~1  Math.floor(x):返回小于等于x的最大整数</span><br><span class=\"line\">            &#x2F;*led_array[0] &#x3D;10;  </span><br><span class=\"line\">            led_array[1] &#x3D; 31;   </span><br><span class=\"line\">            led_array[2] &#x3D; 31;   </span><br><span class=\"line\">            led_array[3] &#x3D; 14;   </span><br><span class=\"line\">            led_array[4] &#x3D; 4;*&#x2F;</span><br><span class=\"line\">            &#x2F;*led_array[0] &#x3D; 31;  </span><br><span class=\"line\">            led_array[1] &#x3D; 17;   </span><br><span class=\"line\">            led_array[2] &#x3D; 17;   </span><br><span class=\"line\">            led_array[3] &#x3D; 17;   </span><br><span class=\"line\">            led_array[4] &#x3D; 31; *&#x2F;</span><br><span class=\"line\"> </span><br><span class=\"line\">            var led_matrix_data &#x3D; new Uint8Array(led_array); </span><br><span class=\"line\"></span><br><span class=\"line\">            led_matrix_state.writeValue(led_matrix_data.buffer)</span><br><span class=\"line\">            .then(_ &#x3D;&gt; &#123;   </span><br><span class=\"line\">                console.log(&#39;LED matrix state changed&#39;);  </span><br><span class=\"line\">                &#125;)  </span><br><span class=\"line\">            .catch(error &#x3D;&gt; &#123;   </span><br><span class=\"line\">                console.log(&#39;Error: &#39; + error);   </span><br><span class=\"line\">                alert(&#39;Error: &#39; + error);   return;  </span><br><span class=\"line\">                &#125;); </span><br><span class=\"line\">        &#125;  </span><br><span class=\"line\">        function readModelNumber()  &#x2F;&#x2F; 蓝牙信息服务</span><br><span class=\"line\">        &#123;  </span><br><span class=\"line\">            console.log(&quot;readModelNumber&quot;);   </span><br><span class=\"line\">            &#x2F;&#x2F; state validation   </span><br><span class=\"line\">            if (!connected) </span><br><span class=\"line\">            &#123;     </span><br><span class=\"line\">                alert(&quot;Error: Discover and connect to a device before using this function&quot;);     </span><br><span class=\"line\">                return;   </span><br><span class=\"line\">            &#125;   </span><br><span class=\"line\">            if (!services_discovered) </span><br><span class=\"line\">            &#123;     </span><br><span class=\"line\">                alert(&quot;Error: Service discovery has not yet completed&quot;);     </span><br><span class=\"line\">                return;   </span><br><span class=\"line\">            &#125;    </span><br><span class=\"line\">            if (!has_device_information_service) </span><br><span class=\"line\">            &#123;     </span><br><span class=\"line\">                alert(&quot;Error: The connected device does not contain the device information service&quot;);     </span><br><span class=\"line\">                return;   </span><br><span class=\"line\">            &#125;   </span><br><span class=\"line\">            if (!has_model_name_string) </span><br><span class=\"line\">            &#123;     </span><br><span class=\"line\">                alert(&quot;Error: The connected device does not contain the model name string characteristic&quot;);     </span><br><span class=\"line\">                return;   </span><br><span class=\"line\">            &#125;   </span><br><span class=\"line\">            </span><br><span class=\"line\">            model_number_string.readValue()</span><br><span class=\"line\">            .then(value &#x3D;&gt; &#123;   </span><br><span class=\"line\">                data &#x3D; new Uint8Array(value.buffer);   </span><br><span class=\"line\">                model_number_string &#x3D; new TextDecoder(&quot;utf-8&quot;).decode(data);  </span><br><span class=\"line\">                console.log(model_number_string);   </span><br><span class=\"line\">                document.getElementById(&quot;model_number&quot;).innerHTML &#x3D; model_number_string;  </span><br><span class=\"line\">                &#125;)  </span><br><span class=\"line\">            .catch(error &#x3D;&gt; &#123;  </span><br><span class=\"line\">                console.log(&#39;Error: &#39; + error);   </span><br><span class=\"line\">                alert(&#39;Error: &#39; + error);   </span><br><span class=\"line\">                return;  </span><br><span class=\"line\">                &#125;); </span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">\t\t\t</span><br><span class=\"line\">\t\t\t\t  function accelerometer()   &#x2F;&#x2F;加速度传感器</span><br><span class=\"line\">\t\t\t\t &#123;  </span><br><span class=\"line\">\t\t\t\t     console.log(&quot;accelerometer&quot;);   </span><br><span class=\"line\">\t\t\t\t     &#x2F;&#x2F; state validation   </span><br><span class=\"line\">\t\t\t\t     if (!connected) </span><br><span class=\"line\">\t\t\t\t     &#123;     </span><br><span class=\"line\">\t\t\t\t         alert(&quot;Error: Discover and connect to a device before using this function&quot;);     </span><br><span class=\"line\">\t\t\t\t         return;   </span><br><span class=\"line\">\t\t\t\t     &#125;   </span><br><span class=\"line\">\t\t\t\t     if (!services_discovered) </span><br><span class=\"line\">\t\t\t\t     &#123;     </span><br><span class=\"line\">\t\t\t\t         alert(&quot;Error: Service discovery has not yet completed&quot;);     </span><br><span class=\"line\">\t\t\t\t         return;  </span><br><span class=\"line\">\t\t\t\t     &#125;   </span><br><span class=\"line\">\t\t\t\t     if (!has_accelerometer_service) </span><br><span class=\"line\">\t\t\t\t     &#123;     </span><br><span class=\"line\">\t\t\t\t         alert(&quot;Error: The connected device does not contain the accelerometer service&quot;);     </span><br><span class=\"line\">\t\t\t\t         return;  </span><br><span class=\"line\">\t\t\t\t     &#125;   </span><br><span class=\"line\">\t\t\t\t     if (!has_accelerometer_data) </span><br><span class=\"line\">\t\t\t\t     &#123;      </span><br><span class=\"line\">\t\t\t\t         alert(&quot;Error: The connected device does not contain the accelerometer_data characteristic&quot;);      </span><br><span class=\"line\">\t\t\t\t         return;   </span><br><span class=\"line\">\t\t\t\t     &#125;   </span><br><span class=\"line\">\t\t\t\t </span><br><span class=\"line\">\t\t\t\t     accelerometer_data.readValue()</span><br><span class=\"line\">\t\t\t\t    .then(value &#x3D;&gt; &#123;</span><br><span class=\"line\">\t\t\t\t      buffer &#x3D; value.buffer;</span><br><span class=\"line\">\t\t\t\t      dataview &#x3D; new DataView(buffer);</span><br><span class=\"line\">\t\t\t\t      X &#x3D; dataview.getUint16(0, true);</span><br><span class=\"line\">\t\t\t\t      Y &#x3D; dataview.getUint16(2, true);</span><br><span class=\"line\">\t\t\t\t      Z &#x3D; dataview.getUint16(4, true);</span><br><span class=\"line\">\t\t\t\t      console.log(&quot;X&#x3D;&quot; + X + &quot;, Y&#x3D;&quot; + Y + &quot;, Z+&quot; + Z);</span><br><span class=\"line\">\t\t\t\t      document.getElementById(&quot;ac_data&quot;).innerHTML &#x3D; &quot;X&#x3D;&quot; + X + &quot;, Y&#x3D;&quot; + Y + &quot;,Z&#x3D;&quot; + Z;</span><br><span class=\"line\">\t\t\t\t        &#125;)  </span><br><span class=\"line\">\t\t\t\t    .catch(error &#x3D;&gt; &#123;  </span><br><span class=\"line\">\t\t\t\t        console.log(&#39;Error: &#39; + error);   </span><br><span class=\"line\">\t\t\t\t        alert(&#39;Error: &#39; + error);   </span><br><span class=\"line\">\t\t\t\t        return;  </span><br><span class=\"line\">\t\t\t\t        &#125;); </span><br><span class=\"line\">\t\t\t\t        </span><br><span class=\"line\">\t\t\t\t       </span><br><span class=\"line\">\t\t\t\t &#125;  </span><br><span class=\"line\">\t\t\t\t </span><br><span class=\"line\">        &lt;&#x2F;script&gt;</span><br><span class=\"line\">    &lt;&#x2F;head&gt;</span><br><span class=\"line\">    &lt;body&gt;</span><br><span class=\"line\">        &lt;h2&gt;  Status</span><br><span class=\"line\">        &lt;&#x2F;h2&gt;</span><br><span class=\"line\">            &lt;table border&#x3D;&quot;1&quot;&gt;</span><br><span class=\"line\">                &lt;tr&gt;</span><br><span class=\"line\">                    &lt;td&gt;     &lt;b&gt;Connected&lt;&#x2F;b&gt;   &lt;&#x2F;td&gt;</span><br><span class=\"line\">                    &lt;td&gt;     &lt;b&gt;Service Discovery Completed&lt;&#x2F;b&gt;   &lt;&#x2F;td&gt;</span><br><span class=\"line\">                &lt;&#x2F;tr&gt;</span><br><span class=\"line\">                &lt;tr&gt;</span><br><span class=\"line\">                    &lt;td id&#x3D;&quot;status_connected&quot;&gt; false &lt;&#x2F;td&gt;</span><br><span class=\"line\">                    &lt;td id&#x3D;&quot;status_discovered&quot;&gt; false &lt;&#x2F;td&gt;</span><br><span class=\"line\">                &lt;&#x2F;tr&gt;</span><br><span class=\"line\">            &lt;&#x2F;table&gt;</span><br><span class=\"line\">            &lt;hr&gt;</span><br><span class=\"line\">        &lt;h2&gt;</span><br><span class=\"line\">            Device Discovery or Disconnect</span><br><span class=\"line\">        &lt;&#x2F;h2&gt;</span><br><span class=\"line\">        &lt;button id &#x3D; &quot;btn_scan&quot; onclick&#x3D;&quot;discoverOrdisconnectDevices()&quot;&gt;Start scan&lt;&#x2F;button&gt;</span><br><span class=\"line\">        &lt;hr&gt;</span><br><span class=\"line\">        &lt;h2&gt;Reading and Writing&lt;&#x2F;h2&gt;</span><br><span class=\"line\">        &lt;h3&gt;Write Characteristic - Randomise Lights&lt;&#x2F;h3&gt;  </span><br><span class=\"line\">        &lt;button id&#x3D;&quot;btn_write&quot; onclick&#x3D;&quot;randomLEDs(0)&quot;&gt;控制led行&lt;&#x2F;button&gt;</span><br><span class=\"line\">\t\t&lt;button id&#x3D;&quot;btu_write&quot; onclick&#x3D;&quot;randomLs(1)&quot;&gt;控制led列&lt;&#x2F;button&gt;</span><br><span class=\"line\">        &lt;h3&gt;Read Characteristic - Model number&lt;&#x2F;h3&gt;  </span><br><span class=\"line\">        &lt;button id&#x3D;&quot;btn_read&quot; onclick&#x3D;&quot;readModelNumber()&quot;&gt;Read Model number&lt;&#x2F;button&gt; </span><br><span class=\"line\">        &lt;div id&#x3D;&quot;model_number&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class=\"line\">\t\t&lt;h3&gt;accelerometer_data&lt;&#x2F;h3&gt;</span><br><span class=\"line\">\t\t&lt;button id&#x3D;&quot;btn_readAC&quot; onclick&#x3D;&quot;accelerometer()&quot;&gt;Read accelerometer_data&lt;&#x2F;button&gt; </span><br><span class=\"line\">\t\t&lt;div id&#x3D;&quot;ac_data&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class=\"line\">        &lt;hr&gt;</span><br><span class=\"line\">    &lt;&#x2F;body&gt;</span><br><span class=\"line\">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure></div>\n\n<p>通过arr数组的引用并连接开发板，就可以得到如下的效果</p>\n<p><img src=\"http://qcd8f6zpx.bkt.clouddn.com/12.png\" alt=\"\"></p>\n<p>单击两个按钮中的一个 随意实现想要的效果</p>\n","text":" [Figure] 单击两个按钮中的一个 随意实现想要的效果","link":"","raw":null,"photos":[],"categories":[],"tags":[]},{"title":"BBC———控制单行","slug":"hello-world - BBC——控制单行","date":"2020-06-25T10:16:40.064Z","updated":"2020-06-25T10:58:29.512Z","comments":true,"pin":null,"path":"api/articles/hello-world - BBC——控制单行.json","excerpt":"","keywords":null,"cover":"http://qarz21mhq.bkt.clouddn.com/93.jpg","content":"<p><img src=\"http://qarz21mhq.bkt.clouddn.com/93.jpg\" alt=\"\"></p>\n<p>我们用网页控制BBC开发板的led点阵，首先控制单行小灯的亮灭</p>\n<p>这是关于一行5个小灯的代码</p>\n<div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"PLAIN\"><figure class=\"iseeu highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">function led00()              &#x2F;&#x2F;第一行</span><br><span class=\"line\">       &#123;</span><br><span class=\"line\">           if(c[0]&#x3D;&#x3D;0)</span><br><span class=\"line\">           &#123;</span><br><span class=\"line\">               led[0]&#x3D;led[0]|(1&lt;&lt;4);</span><br><span class=\"line\">               c[0]&#x3D;1;</span><br><span class=\"line\">           &#125;</span><br><span class=\"line\">           else&#123;</span><br><span class=\"line\">               led[0]&#x3D;led[0]&amp;(~(1&lt;&lt;4));</span><br><span class=\"line\">               c[0]&#x3D;0;</span><br><span class=\"line\">           &#125;</span><br><span class=\"line\">           randLED();</span><br><span class=\"line\">       &#125;</span><br><span class=\"line\">       function led01()</span><br><span class=\"line\">       &#123;</span><br><span class=\"line\">           if(c[1]&#x3D;&#x3D;0)</span><br><span class=\"line\">           &#123;</span><br><span class=\"line\">               led[0]&#x3D;led[0]|(1&lt;&lt;3);</span><br><span class=\"line\">               c[1]&#x3D;1;</span><br><span class=\"line\">           &#125;</span><br><span class=\"line\">           else&#123;</span><br><span class=\"line\">               led[0]&#x3D;led[0]&amp;(~(1&lt;&lt;3));</span><br><span class=\"line\">               c[1]&#x3D;0;</span><br><span class=\"line\">           &#125;</span><br><span class=\"line\">           randLED();</span><br><span class=\"line\">       &#125;</span><br><span class=\"line\">       function led02()</span><br><span class=\"line\">       &#123;</span><br><span class=\"line\">           if(c[2]&#x3D;&#x3D;0)</span><br><span class=\"line\">           &#123;</span><br><span class=\"line\">               led[0]&#x3D;led[0]|(1&lt;&lt;2);</span><br><span class=\"line\">               c[2]&#x3D;1;</span><br><span class=\"line\">           &#125;</span><br><span class=\"line\">           else&#123;</span><br><span class=\"line\">               led[0]&#x3D;led[0]&amp;(~(1&lt;&lt;2));</span><br><span class=\"line\">               c[2]&#x3D;0;</span><br><span class=\"line\">           &#125;</span><br><span class=\"line\">           randLED();</span><br><span class=\"line\">       &#125;</span><br><span class=\"line\">       function led03()</span><br><span class=\"line\">       &#123;</span><br><span class=\"line\">           if(c[3]&#x3D;&#x3D;0)</span><br><span class=\"line\">           &#123;</span><br><span class=\"line\">               led[0]&#x3D;led[0]|(1&lt;&lt;1);</span><br><span class=\"line\">               c[3]&#x3D;1;</span><br><span class=\"line\">           &#125;</span><br><span class=\"line\">           else&#123;</span><br><span class=\"line\">               led[0]&#x3D;led[0]&amp;(~(1&lt;&lt;1));</span><br><span class=\"line\">               c[3]&#x3D;0;</span><br><span class=\"line\">           &#125;</span><br><span class=\"line\">           randLED();</span><br><span class=\"line\">       &#125;</span><br><span class=\"line\">       function led04()</span><br><span class=\"line\">       &#123;</span><br><span class=\"line\">           if(c[4]&#x3D;&#x3D;0)</span><br><span class=\"line\">           &#123;</span><br><span class=\"line\">               led[0]&#x3D;led[0]|(1&lt;&lt;0);</span><br><span class=\"line\">               c[4]&#x3D;1;</span><br><span class=\"line\">           &#125;</span><br><span class=\"line\">           else&#123;</span><br><span class=\"line\">               led[0]&#x3D;led[0]&amp;(~(1&lt;&lt;0));</span><br><span class=\"line\">               c[4]&#x3D;0;</span><br><span class=\"line\">           &#125;</span><br><span class=\"line\">           randLED();</span><br><span class=\"line\">       &#125;</span><br></pre></td></tr></table></figure></div>\n\n<p>并且添加25个按钮</p>\n<div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"PLAIN\"><figure class=\"iseeu highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;h3&gt;控制单个小灯亮暗&lt;&#x2F;h3&gt; </span><br><span class=\"line\">       &lt;button id&#x3D;&quot;led00&quot; onclick&#x3D;&quot;led00()&quot;&gt;第一行第一列&lt;&#x2F;button&gt;</span><br><span class=\"line\">       &lt;button id&#x3D;&quot;led01&quot; onclick&#x3D;&quot;led01()&quot;&gt;第一行第二列&lt;&#x2F;button&gt;</span><br><span class=\"line\">       &lt;button id&#x3D;&quot;led02&quot; onclick&#x3D;&quot;led02()&quot;&gt;第一行第三列&lt;&#x2F;button&gt;</span><br><span class=\"line\">       &lt;button id&#x3D;&quot;led03&quot; onclick&#x3D;&quot;led03()&quot;&gt;第一行第四列&lt;&#x2F;button&gt;</span><br><span class=\"line\">       &lt;button id&#x3D;&quot;led04&quot; onclick&#x3D;&quot;led04()&quot;&gt;第一行第五列&lt;&#x2F;button&gt;</span><br><span class=\"line\">       &lt;br&gt;</span><br><span class=\"line\">       &lt;button id&#x3D;&quot;led10&quot; onclick&#x3D;&quot;led10()&quot;&gt;第二行第一列&lt;&#x2F;button&gt;</span><br><span class=\"line\">       &lt;button id&#x3D;&quot;led11&quot; onclick&#x3D;&quot;led11()&quot;&gt;第二行第二列&lt;&#x2F;button&gt;</span><br><span class=\"line\">       &lt;button id&#x3D;&quot;led12&quot; onclick&#x3D;&quot;led12()&quot;&gt;第二行第三列&lt;&#x2F;button&gt;</span><br><span class=\"line\">       &lt;button id&#x3D;&quot;led13&quot; onclick&#x3D;&quot;led13()&quot;&gt;第二行第四列&lt;&#x2F;button&gt;</span><br><span class=\"line\">       &lt;button id&#x3D;&quot;led14&quot; onclick&#x3D;&quot;led14()&quot;&gt;第二行第五列&lt;&#x2F;button&gt;</span><br><span class=\"line\">       &lt;br&gt;</span><br><span class=\"line\">       &lt;button id&#x3D;&quot;led20&quot; onclick&#x3D;&quot;led20()&quot;&gt;第三行第一列&lt;&#x2F;button&gt;</span><br><span class=\"line\">       &lt;button id&#x3D;&quot;led21&quot; onclick&#x3D;&quot;led21()&quot;&gt;第三行第二列&lt;&#x2F;button&gt;</span><br><span class=\"line\">       &lt;button id&#x3D;&quot;led22&quot; onclick&#x3D;&quot;led22()&quot;&gt;第三行第三列&lt;&#x2F;button&gt;</span><br><span class=\"line\">       &lt;button id&#x3D;&quot;led23&quot; onclick&#x3D;&quot;led23()&quot;&gt;第三行第四列&lt;&#x2F;button&gt;</span><br><span class=\"line\">       &lt;button id&#x3D;&quot;led24&quot; onclick&#x3D;&quot;led24()&quot;&gt;第三行第五列&lt;&#x2F;button&gt;</span><br><span class=\"line\">       &lt;br&gt;</span><br><span class=\"line\">       &lt;button id&#x3D;&quot;led30&quot; onclick&#x3D;&quot;led30()&quot;&gt;第四行第一列&lt;&#x2F;button&gt;</span><br><span class=\"line\">       &lt;button id&#x3D;&quot;led31&quot; onclick&#x3D;&quot;led31()&quot;&gt;第四行第二列&lt;&#x2F;button&gt;</span><br><span class=\"line\">       &lt;button id&#x3D;&quot;led32&quot; onclick&#x3D;&quot;led32()&quot;&gt;第四行第三列&lt;&#x2F;button&gt;</span><br><span class=\"line\">       &lt;button id&#x3D;&quot;led33&quot; onclick&#x3D;&quot;led33()&quot;&gt;第四行第四列&lt;&#x2F;button&gt;</span><br><span class=\"line\">       &lt;button id&#x3D;&quot;led34&quot; onclick&#x3D;&quot;led34()&quot;&gt;第四行第五列&lt;&#x2F;button&gt;</span><br><span class=\"line\">       &lt;br&gt;</span><br><span class=\"line\">       &lt;button id&#x3D;&quot;led40&quot; onclick&#x3D;&quot;led40()&quot;&gt;第五行第一列&lt;&#x2F;button&gt;</span><br><span class=\"line\">       &lt;button id&#x3D;&quot;led41&quot; onclick&#x3D;&quot;led41()&quot;&gt;第五行第二列&lt;&#x2F;button&gt;</span><br><span class=\"line\">       &lt;button id&#x3D;&quot;led42&quot; onclick&#x3D;&quot;led42()&quot;&gt;第五行第三列&lt;&#x2F;button&gt;</span><br><span class=\"line\">       &lt;button id&#x3D;&quot;led43&quot; onclick&#x3D;&quot;led43()&quot;&gt;第五行第四列&lt;&#x2F;button&gt;</span><br><span class=\"line\">       &lt;button id&#x3D;&quot;led44&quot; onclick&#x3D;&quot;led44()&quot;&gt;第五行第五列&lt;&#x2F;button&gt;</span><br></pre></td></tr></table></figure></div>\n\n<p>通过arr数组的引用并连接开发板，就可以得到如下的效果</p>\n<p><img src=\"http://qcd8f6zpx.bkt.clouddn.com/12.png\" alt=\"\"></p>\n","text":" [Figure] ","link":"","raw":null,"photos":[],"categories":[],"tags":[]},{"title":"BBC———启用通知","slug":"hello-world - BBC——启用通知","date":"2020-06-23T05:27:18.959Z","updated":"2020-06-23T06:18:54.699Z","comments":true,"pin":null,"path":"api/articles/hello-world - BBC——启用通知.json","excerpt":"","keywords":null,"cover":"http://qarz21mhq.bkt.clouddn.com/93.jpg","content":"<p><img src=\"http://qarz21mhq.bkt.clouddn.com/93.jpg\" alt=\"\"></p>\n<h3 id=\"加速度传感器\"><a href=\"#加速度传感器\" class=\"headerlink\" title=\"加速度传感器\"></a>加速度传感器</h3><p>一个<a href=\"https://baike.sogou.com/lemma/ShowInnerLink.htm?lemmaId=354707&ss_c=ssc.citiao.link\" target=\"_blank\" rel=\"noopener\">加速度传感器</a>可以测量micro:bit的加速度；这个传感器可以检测micro:bit的移动。它也可以检测其他的动作，例如：摇动，倾斜以及自由落体。</p>\n<div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"PLAIN\"><figure class=\"iseeu highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br><span class=\"line\">210</span><br><span class=\"line\">211</span><br><span class=\"line\">212</span><br><span class=\"line\">213</span><br><span class=\"line\">214</span><br><span class=\"line\">215</span><br><span class=\"line\">216</span><br><span class=\"line\">217</span><br><span class=\"line\">218</span><br><span class=\"line\">219</span><br><span class=\"line\">220</span><br><span class=\"line\">221</span><br><span class=\"line\">222</span><br><span class=\"line\">223</span><br><span class=\"line\">224</span><br><span class=\"line\">225</span><br><span class=\"line\">226</span><br><span class=\"line\">227</span><br><span class=\"line\">228</span><br><span class=\"line\">229</span><br><span class=\"line\">230</span><br><span class=\"line\">231</span><br><span class=\"line\">232</span><br><span class=\"line\">233</span><br><span class=\"line\">234</span><br><span class=\"line\">235</span><br><span class=\"line\">236</span><br><span class=\"line\">237</span><br><span class=\"line\">238</span><br><span class=\"line\">239</span><br><span class=\"line\">240</span><br><span class=\"line\">241</span><br><span class=\"line\">242</span><br><span class=\"line\">243</span><br><span class=\"line\">244</span><br><span class=\"line\">245</span><br><span class=\"line\">246</span><br><span class=\"line\">247</span><br><span class=\"line\">248</span><br><span class=\"line\">249</span><br><span class=\"line\">250</span><br><span class=\"line\">251</span><br><span class=\"line\">252</span><br><span class=\"line\">253</span><br><span class=\"line\">254</span><br><span class=\"line\">255</span><br><span class=\"line\">256</span><br><span class=\"line\">257</span><br><span class=\"line\">258</span><br><span class=\"line\">259</span><br><span class=\"line\">260</span><br><span class=\"line\">261</span><br><span class=\"line\">262</span><br><span class=\"line\">263</span><br><span class=\"line\">264</span><br><span class=\"line\">265</span><br><span class=\"line\">266</span><br><span class=\"line\">267</span><br><span class=\"line\">268</span><br><span class=\"line\">269</span><br><span class=\"line\">270</span><br><span class=\"line\">271</span><br><span class=\"line\">272</span><br><span class=\"line\">273</span><br><span class=\"line\">274</span><br><span class=\"line\">275</span><br><span class=\"line\">276</span><br><span class=\"line\">277</span><br><span class=\"line\">278</span><br><span class=\"line\">279</span><br><span class=\"line\">280</span><br><span class=\"line\">281</span><br><span class=\"line\">282</span><br><span class=\"line\">283</span><br><span class=\"line\">284</span><br><span class=\"line\">285</span><br><span class=\"line\">286</span><br><span class=\"line\">287</span><br><span class=\"line\">288</span><br><span class=\"line\">289</span><br><span class=\"line\">290</span><br><span class=\"line\">291</span><br><span class=\"line\">292</span><br><span class=\"line\">293</span><br><span class=\"line\">294</span><br><span class=\"line\">295</span><br><span class=\"line\">296</span><br><span class=\"line\">297</span><br><span class=\"line\">298</span><br><span class=\"line\">299</span><br><span class=\"line\">300</span><br><span class=\"line\">301</span><br><span class=\"line\">302</span><br><span class=\"line\">303</span><br><span class=\"line\">304</span><br><span class=\"line\">305</span><br><span class=\"line\">306</span><br><span class=\"line\">307</span><br><span class=\"line\">308</span><br><span class=\"line\">309</span><br><span class=\"line\">310</span><br><span class=\"line\">311</span><br><span class=\"line\">312</span><br><span class=\"line\">313</span><br><span class=\"line\">314</span><br><span class=\"line\">315</span><br><span class=\"line\">316</span><br><span class=\"line\">317</span><br><span class=\"line\">318</span><br><span class=\"line\">319</span><br><span class=\"line\">320</span><br><span class=\"line\">321</span><br><span class=\"line\">322</span><br><span class=\"line\">323</span><br><span class=\"line\">324</span><br><span class=\"line\">325</span><br><span class=\"line\">326</span><br><span class=\"line\">327</span><br><span class=\"line\">328</span><br><span class=\"line\">329</span><br><span class=\"line\">330</span><br><span class=\"line\">331</span><br><span class=\"line\">332</span><br><span class=\"line\">333</span><br><span class=\"line\">334</span><br><span class=\"line\">335</span><br><span class=\"line\">336</span><br><span class=\"line\">337</span><br><span class=\"line\">338</span><br><span class=\"line\">339</span><br><span class=\"line\">340</span><br><span class=\"line\">341</span><br><span class=\"line\">342</span><br><span class=\"line\">343</span><br><span class=\"line\">344</span><br><span class=\"line\">345</span><br><span class=\"line\">346</span><br><span class=\"line\">347</span><br><span class=\"line\">348</span><br><span class=\"line\">349</span><br><span class=\"line\">350</span><br><span class=\"line\">351</span><br><span class=\"line\">352</span><br><span class=\"line\">353</span><br><span class=\"line\">354</span><br><span class=\"line\">355</span><br><span class=\"line\">356</span><br><span class=\"line\">357</span><br><span class=\"line\">358</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;html&gt;</span><br><span class=\"line\">    &lt;head&gt;</span><br><span class=\"line\">    &lt;script&gt;</span><br><span class=\"line\">         var    selected_device;    </span><br><span class=\"line\">         var    connected_server;    </span><br><span class=\"line\">         var    connected &#x3D; false;    </span><br><span class=\"line\">         var    services_discovered &#x3D; false;  &#x2F;&#x2F;在第5课上添加</span><br><span class=\"line\">         var    notifications_enabled &#x3D; false; </span><br><span class=\"line\">         &#x2F;&#x2F;在第5课上添加以下内容</span><br><span class=\"line\">     var has_accelerometer_service &#x3D; false; </span><br><span class=\"line\">     var has_accelerometer_data &#x3D; false;</span><br><span class=\"line\">     var has_led_service &#x3D; false;</span><br><span class=\"line\">     var has_led_matrix_state &#x3D; false;</span><br><span class=\"line\">     var has_device_information_service &#x3D; false; </span><br><span class=\"line\">     var has_model_name_string &#x3D; false; </span><br><span class=\"line\"> </span><br><span class=\"line\">    &#x2F;&#x2F; service UUIDs </span><br><span class=\"line\">    ACCELEROMETER_SERVICE &#x3D; &#39;e95d0753-251d-470a-a062-fa1922dfa9a8&#39;; </span><br><span class=\"line\">    LED_SERVICE &#x3D; &#39;e95dd91d-251d-470a-a062-fa1922dfa9a8&#39;; </span><br><span class=\"line\">    DEVICE_INFORMATION_SERVICE &#x3D; &#39;0000180a-0000-1000-8000-00805f9b34fb&#39;;</span><br><span class=\"line\">    &#x2F;&#x2F; characteristic UUIDs </span><br><span class=\"line\">    ACCELEROMETER_DATA &#x3D; &#39;e95dca4b-251d-470a-a062-fa1922dfa9a8&#39;; </span><br><span class=\"line\">    LED_MATRIX_STATE  &#x3D; &#39;e95d7b77-251d-470a-a062-fa1922dfa9a8&#39;; </span><br><span class=\"line\">    MODEL_NUMBER_STRING &#x3D; &#39;00002a24-0000-1000-8000-00805f9b34fb&#39;; </span><br><span class=\"line\">   </span><br><span class=\"line\">    &#x2F;&#x2F; cached characteristics </span><br><span class=\"line\">     var led_matrix_state; </span><br><span class=\"line\">     var model_number_string;</span><br><span class=\"line\">     var accelerometer_data; </span><br><span class=\"line\">     </span><br><span class=\"line\">      &#x2F;&#x2F;</span><br><span class=\"line\">      var service_count;</span><br><span class=\"line\">      var services_discovered;</span><br><span class=\"line\">      var characteristics_discovered;  </span><br><span class=\"line\">      var characteristic_count ; </span><br><span class=\"line\">     function discoverOrdisconnectDevices()  </span><br><span class=\"line\">     &#123;</span><br><span class=\"line\">         console.log(&quot;discoverDevicesOrDisconnect&quot;); </span><br><span class=\"line\">         if (!connected)</span><br><span class=\"line\">             discoverDevices();</span><br><span class=\"line\">         else</span><br><span class=\"line\">         &#123;</span><br><span class=\"line\">             selected_device.gatt.disconnect();</span><br><span class=\"line\">         &#125;</span><br><span class=\"line\"> </span><br><span class=\"line\">     &#125;</span><br><span class=\"line\"> </span><br><span class=\"line\">    function setNotificationsStatus(status) &#123; </span><br><span class=\"line\">     notifications_enabled &#x3D; status; </span><br><span class=\"line\">     document.getElementById(&#39;status_notifications&#39;).innerHTML &#x3D; status; </span><br><span class=\"line\"> &#125;</span><br><span class=\"line\"> function onDisconnected()           </span><br><span class=\"line\">    &#123;  </span><br><span class=\"line\">         console.log(&quot;onDisconnected&quot;);  </span><br><span class=\"line\">         resetUI(); </span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"> function onAccelerometerData(event) &#123; </span><br><span class=\"line\">\t console.log(&quot;onAccelerometerData&quot;);</span><br><span class=\"line\">\t buffer &#x3D; event.target.value.buffer; </span><br><span class=\"line\">\t dataview &#x3D; new DataView(buffer); </span><br><span class=\"line\">\t X &#x3D; dataview.getUint16(0, true); </span><br><span class=\"line\">\t Y &#x3D; dataview.getUint16(2, true); </span><br><span class=\"line\">\t Z &#x3D; dataview.getUint16(4, true);  </span><br><span class=\"line\">\t console.log(&quot;X&#x3D;&quot; + X + &quot;, Y&#x3D;&quot; + Y + &quot;, Z+&quot; + Z);  document.getElementById(&quot;accelerometer_data&quot;).innerHTML &#x3D; &quot;X&#x3D;&quot; + X + &quot;, Y&#x3D;&quot; + Y + &quot;, Z&#x3D;&quot; + Z; &#125;</span><br><span class=\"line\">    function discoverDevices()</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        console.log(&quot;discoverDevices&quot;);             </span><br><span class=\"line\">        var options &#x3D; &#123;acceptAllDevices:true,</span><br><span class=\"line\">            optionalServices: [DEVICE_INFORMATION_SERVICE, ACCELEROMETER_SERVICE, LED_SERVICE]  &#x2F;&#x2F;在第5节课上添加</span><br><span class=\"line\">        &#125;       </span><br><span class=\"line\">        navigator.bluetooth.requestDevice(options)   </span><br><span class=\"line\">        .then(device &#x3D;&gt; &#123;</span><br><span class=\"line\">            console.log(&#39;&gt; Name:&#39; + device.name);</span><br><span class=\"line\">            console.log(&#39;&gt; Id:&#39;   + device.id);</span><br><span class=\"line\">            console.log(&#39;&gt; Connected:&#39; + device.gatt.connected);</span><br><span class=\"line\">            selected_device &#x3D; device;</span><br><span class=\"line\">            console.log(selected_device);</span><br><span class=\"line\">            connect();                              </span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">        .catch(error &#x3D;&gt; &#123;</span><br><span class=\"line\">            alert(&#39;ERROR:&#39; +error);</span><br><span class=\"line\">            console.log(&#39;ERROR:&#39; + error);</span><br><span class=\"line\">            &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    function connect()                             </span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        console.log(&quot;connecting&quot;);</span><br><span class=\"line\">        selected_device.gatt.connect()</span><br><span class=\"line\">        .then(</span><br><span class=\"line\">            function (server)        &#x2F;&#x2F;表示连接成功</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                console.log(&quot;Connected to&quot; + server.device.id);</span><br><span class=\"line\">                console.log(&quot;Connected&#x3D;&quot; + server.connected);</span><br><span class=\"line\">                selected_device.addEventListener( &#39;gattserverdisconnected&#39;,onDisconnected);  &#x2F;&#x2F; 在第4课基础上添加的函数</span><br><span class=\"line\">               </span><br><span class=\"line\">                connected_server &#x3D; server;</span><br><span class=\"line\">                discoverSvcsAndChars();    &#x2F;&#x2F;&#x2F;&#x2F;在第5课基础上添加的函数</span><br><span class=\"line\">                setConnectedStatus(true);   &#x2F;&#x2F; 在第3课基础上添加的函数,设置电脑蓝牙的当前连接状态</span><br><span class=\"line\">               </span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            function (error)        &#x2F;&#x2F;表示连接失败</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                console.log(&quot;ERROR:could not connct-&quot; + error);</span><br><span class=\"line\">                alert(&quot;ERROR:could not connct-&quot; + error);</span><br><span class=\"line\">                setConnectedStatus(false);  &#x2F;&#x2F; 在第3课基础上添加的函数,设置电脑蓝牙的当前连接状态</span><br><span class=\"line\">               </span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        );</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    function setConnectedStatus(status)  &#x2F;&#x2F; 在第3课基础上添加的函数,设置电脑蓝牙的当前连接状态</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        connected &#x3D; status;</span><br><span class=\"line\">        document.getElementById(&#39;status_connected&#39;).innerHTML &#x3D; status;</span><br><span class=\"line\">        if (status &#x3D;&#x3D; true) </span><br><span class=\"line\">        &#123;   </span><br><span class=\"line\">            document.getElementById(&#39;btn_scan&#39;).innerHTML &#x3D; &quot;Disconnect&quot;; </span><br><span class=\"line\">        &#125; </span><br><span class=\"line\">        else </span><br><span class=\"line\">        &#123;   </span><br><span class=\"line\">            document.getElementById(&#39;btn_scan&#39;).innerHTML &#x3D; &quot;Discover Devices&quot;;  </span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    function setDiscoveryStatus(status)</span><br><span class=\"line\">     &#123;  </span><br><span class=\"line\">         services_discovered &#x3D; status; </span><br><span class=\"line\">         document.getElementById(&#39;status_discovered&#39;).innerHTML &#x3D; status;</span><br><span class=\"line\">     &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    function resetUI()      &#x2F;&#x2F; 在第4课基础上添加的函数</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        setConnectedStatus(false);</span><br><span class=\"line\">        setDiscoveryStatus(false);    &#x2F;&#x2F; 在第5课基础上添加的函数</span><br><span class=\"line\">\t\tsetNotificationsStatus(false); </span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    function discoverSvcsAndChars()    &#x2F;&#x2F;在第5课基础上添加的函数</span><br><span class=\"line\">    &#123;  </span><br><span class=\"line\">        console.log(&quot;discoverSvcsAndChars server&#x3D;&quot; + connected_server); </span><br><span class=\"line\">        connected_server.getPrimaryServices()&#x2F;&#x2F;调用函数去获取BBC上的相应的服务</span><br><span class=\"line\">        .then(services &#x3D;&gt; &#x2F;&#x2F;对服务进行判断</span><br><span class=\"line\">        &#123;    </span><br><span class=\"line\">                has_accelerometer_service &#x3D; false;    </span><br><span class=\"line\">                has_led_service &#x3D; false;    </span><br><span class=\"line\">                has_device_information_service &#x3D; false; </span><br><span class=\"line\">    </span><br><span class=\"line\">                services_discovered &#x3D; 0;    </span><br><span class=\"line\">                service_count &#x3D; services.length;    &#x2F;&#x2F;发现BBC板服务的个数</span><br><span class=\"line\">                console.log(&quot;Got &quot; + service_count + &quot; services&quot;); </span><br><span class=\"line\">    </span><br><span class=\"line\">                services.forEach(service &#x3D;&gt;  &#x2F;&#x2F;对已发现的所有服务进行判断</span><br><span class=\"line\">                &#123;     </span><br><span class=\"line\">                    if (service.uuid &#x3D;&#x3D; ACCELEROMETER_SERVICE)</span><br><span class=\"line\">                    &#123;      </span><br><span class=\"line\">                        has_accelerometer_service &#x3D; true;    </span><br><span class=\"line\">                    &#125;     </span><br><span class=\"line\">                    if (service.uuid &#x3D;&#x3D; LED_SERVICE) </span><br><span class=\"line\">                    &#123;      </span><br><span class=\"line\">                        has_led_service &#x3D; true;     </span><br><span class=\"line\">                    &#125;     </span><br><span class=\"line\">                    if (service.uuid &#x3D;&#x3D; DEVICE_INFORMATION_SERVICE) </span><br><span class=\"line\">                    &#123;      </span><br><span class=\"line\">                        has_device_information_service &#x3D; true;     </span><br><span class=\"line\">                    &#125;     </span><br><span class=\"line\">                    console.log(&#39;Getting Characteristics for service &#39; + service.uuid);     </span><br><span class=\"line\">                    service.getCharacteristics()  &#x2F;&#x2F;获取相应服务的所有特性</span><br><span class=\"line\">                    .then(characteristics &#x3D;&gt; </span><br><span class=\"line\">                    &#123;      </span><br><span class=\"line\">                        console.log(&#39;&gt; Service: &#39; + service.uuid);      </span><br><span class=\"line\">                        services_discovered++;     &#x2F;&#x2F;发现一个就加一</span><br><span class=\"line\">                        characteristics_discovered &#x3D; 0;      </span><br><span class=\"line\">                        characteristic_count &#x3D; characteristics.length;      &#x2F;&#x2F;特性的个数</span><br><span class=\"line\">                        characteristics.forEach(characteristic &#x3D;&gt; &#x2F;&#x2F;对已发现的特性进行判断</span><br><span class=\"line\">                        &#123;       </span><br><span class=\"line\">                            characteristics_discovered++;       </span><br><span class=\"line\">                            console.log(&#39;&gt;&gt; Characteristic: &#39; + characteristic.uuid);       </span><br><span class=\"line\">                            if (characteristic.uuid &#x3D;&#x3D; ACCELEROMETER_DATA)</span><br><span class=\"line\">                            &#123;        </span><br><span class=\"line\">                                accelerometer_data &#x3D; characteristic;        &#x2F;&#x2F;把发现的相应特性保存到相应变量中</span><br><span class=\"line\">                                has_accelerometer_data &#x3D; true;       </span><br><span class=\"line\">                            &#125;       </span><br><span class=\"line\">                            if (characteristic.uuid &#x3D;&#x3D; LED_MATRIX_STATE) </span><br><span class=\"line\">                            &#123;        </span><br><span class=\"line\">                                led_matrix_state &#x3D; characteristic;        </span><br><span class=\"line\">                                has_led_matrix_state &#x3D; true;       </span><br><span class=\"line\">                            &#125;       </span><br><span class=\"line\">                            if (characteristic.uuid &#x3D;&#x3D; MODEL_NUMBER_STRING) </span><br><span class=\"line\">                            &#123;        </span><br><span class=\"line\">                                model_number_string &#x3D; characteristic;        </span><br><span class=\"line\">                                has_model_name_string &#x3D; true;       </span><br><span class=\"line\">                            &#125;       </span><br><span class=\"line\">                            if (services_discovered &#x3D;&#x3D; service_count &amp;&amp; characteristics_discovered &#x3D;&#x3D; characteristic_count) </span><br><span class=\"line\">                            &#123;        </span><br><span class=\"line\">                                console.log(&quot;FINISHED DISCOVERY&quot;); </span><br><span class=\"line\">                                setDiscoveryStatus(true);       </span><br><span class=\"line\">                                &#x2F;&#x2F;setDiscoveryStatus(true);                  </span><br><span class=\"line\">                            &#125;      </span><br><span class=\"line\">                        &#125;);     </span><br><span class=\"line\">                    &#125;);    </span><br><span class=\"line\">                &#125;);  </span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">   function randomLEDs()&#x2F;&#x2F;第六节课添加</span><br><span class=\"line\">   &#123;</span><br><span class=\"line\">\t   console.log(&quot;randomLEDs&quot;);</span><br><span class=\"line\">\t   &#x2F;&#x2F;state validation</span><br><span class=\"line\">\t   if (!connected)</span><br><span class=\"line\">\t\t   &#123;</span><br><span class=\"line\">\t\t\t   alert(&quot;Error: Discover and connect to a device before using this function&quot;);</span><br><span class=\"line\">\t\t\t   return</span><br><span class=\"line\">\t\t   &#125;</span><br><span class=\"line\">\t   if (!services_discovered)&#x2F;&#x2F;有没有发现所有服务</span><br><span class=\"line\">\t\t   &#123;</span><br><span class=\"line\">\t\t\t   alert(&quot;Error: Service discovery has not yet completed&quot;);</span><br><span class=\"line\">\t\t\t   return</span><br><span class=\"line\">\t\t   &#125;</span><br><span class=\"line\">\t   if (!has_led_service)</span><br><span class=\"line\">\t\t   &#123;</span><br><span class=\"line\">\t\t\t   alert(&quot;Error: The connected device does not contain the LED service&quot;);</span><br><span class=\"line\">\t\t\t   return</span><br><span class=\"line\">\t\t   &#125;</span><br><span class=\"line\">\t   if (!has_led_matrix_state)&#x2F;&#x2F;led灯的特性有没有被发现的一个标记变量</span><br><span class=\"line\">\t\t   &#123;</span><br><span class=\"line\">\t\t\t   alert(&quot;Error: The connected device does not contain the LED matrix state characteristic&quot;);</span><br><span class=\"line\">\t\t\t   return;</span><br><span class=\"line\">\t\t   &#125;</span><br><span class=\"line\">\t   var led_array &#x3D; [0, 0, 0, 0, 0];</span><br><span class=\"line\">\t   </span><br><span class=\"line\">\t   &#x2F;&#x2F;math.random():0~1  math.floor(x):返回小于等于x的最大整数</span><br><span class=\"line\">\t   led_array[0] &#x3D; Math.floor(Math.random() * 32);</span><br><span class=\"line\">\t   led_array[1] &#x3D; 1;</span><br><span class=\"line\">\t   led_array[2] &#x3D; 2;</span><br><span class=\"line\">\t   led_array[3] &#x3D; 3;</span><br><span class=\"line\">\t   led_array[4] &#x3D; 4;</span><br><span class=\"line\">\t   </span><br><span class=\"line\">\t   var led_matrix_data &#x3D; new Uint8Array(led_array);</span><br><span class=\"line\">\t   </span><br><span class=\"line\">\t   led_matrix_state.writeValue(led_matrix_data.buffer)&#x2F;&#x2F;控制板子上灯亮灭</span><br><span class=\"line\">\t   .then(_ &#x3D;&gt; &#123;</span><br><span class=\"line\">\t\t   console.log(&#39;LED matrix state changed&#39;);</span><br><span class=\"line\">\t   &#125;)</span><br><span class=\"line\">\t       .catch(error &#x3D;&gt; &#123;</span><br><span class=\"line\">\t\t   console.log(&#39;Error: &#39; + error);</span><br><span class=\"line\">\t\t   alert(&#39;Error: &#39; +error);  return;</span><br><span class=\"line\">\t   &#125;);</span><br><span class=\"line\">\t   </span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">function readModelNumber() &#123; </span><br><span class=\"line\">\tconsole.log(&quot;readModelNumber&quot;); </span><br><span class=\"line\">\t&#x2F;&#x2F; state validation </span><br><span class=\"line\">\tif (!connected) &#123; </span><br><span class=\"line\">\t\talert(&quot;Error: Discover and connect to a device before using this function&quot;);</span><br><span class=\"line\">\t\treturn; </span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\tif (!services_discovered) &#123; </span><br><span class=\"line\">\t\talert(&quot;Error: Service discovery has not yet completed&quot;);</span><br><span class=\"line\">\t\treturn; </span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\tif (!has_device_information_service) &#123; </span><br><span class=\"line\">\t\talert(&quot;Error: The connected device does not contain the device information service&quot;);    </span><br><span class=\"line\">\t\treturn;  </span><br><span class=\"line\">\t&#125;   </span><br><span class=\"line\">\tif (!has_model_name_string) &#123;    </span><br><span class=\"line\">\t\talert(&quot;Error: The connected device does not contain the model name string characteristic&quot;);  </span><br><span class=\"line\">\t\treturn;  </span><br><span class=\"line\">\t&#125;   </span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\tmodel_number_string.readValue()  </span><br><span class=\"line\">\t\t.then(value &#x3D;&gt; &#123;    </span><br><span class=\"line\">\t\t   data &#x3D; new Uint8Array(value.buffer);  </span><br><span class=\"line\">\t\t   model_number_string &#x3D; new TextDecoder(&quot;utf8&quot;).decode(data);  </span><br><span class=\"line\">\t\t   console.log(model_number_string); </span><br><span class=\"line\">\t\t   document.getElementById(&quot;model_number&quot;).innerHTML &#x3D; model_number_string; </span><br><span class=\"line\">\t&#125;)   </span><br><span class=\"line\">\t\t.catch(error &#x3D;&gt; &#123;    </span><br><span class=\"line\">\t\tconsole.log(&#39;Error: &#39; + error);   </span><br><span class=\"line\">\t\talert(&#39;Error: &#39; + error);   </span><br><span class=\"line\">\t\treturn;   </span><br><span class=\"line\">\t&#125;);  </span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">function toggleAccelerometerNotifications() &#123; </span><br><span class=\"line\">\tconsole.log(&quot;toggleAccelerometerNotifications&quot;); </span><br><span class=\"line\">\tif (!connected) &#123; </span><br><span class=\"line\">\t\talert(&quot;Error: Discover and connect to a device before using this function&quot;);  </span><br><span class=\"line\">\t\treturn;  </span><br><span class=\"line\">\t&#125; </span><br><span class=\"line\">\tif (!services_discovered) &#123; </span><br><span class=\"line\">\t\talert(&quot;Error: Service discovery has not yet completed&quot;); </span><br><span class=\"line\">\t\treturn; </span><br><span class=\"line\">\t&#125;  </span><br><span class=\"line\">\tif (!has_accelerometer_service) &#123;  </span><br><span class=\"line\">\t\talert(&quot;Error: The connected device does not contain the accelerometer service&quot;);  </span><br><span class=\"line\">\t\treturn;</span><br><span class=\"line\">\t&#125; </span><br><span class=\"line\">\tif (!has_accelerometer_data) &#123;  </span><br><span class=\"line\">\t\talert(&quot;Error: The connected device does not contain the accelerometer data characteristic&quot;);   return; </span><br><span class=\"line\">\t&#125; </span><br><span class=\"line\"></span><br><span class=\"line\">if (!notifications_enabled) &#123;  </span><br><span class=\"line\">\taccelerometer_data.startNotifications()</span><br><span class=\"line\">\t\t.then(_ &#x3D;&gt; &#123; </span><br><span class=\"line\">\t\tconsole.log(&#39;accelerometer notifications started&#39;);  </span><br><span class=\"line\">\t\tsetNotificationsStatus(true); </span><br><span class=\"line\">\t\taccelerometer_data.addEventListener(&#39;characteristicvaluechanged&#39;, onAccelerometerData); </span><br><span class=\"line\">\t&#125;)  </span><br><span class=\"line\">\t\t.catch(error &#x3D;&gt; &#123; </span><br><span class=\"line\">\t\tconsole.log(&#39;Error: &#39; + error);   </span><br><span class=\"line\">\t\talert(&#39;Error: &#39; + error);  </span><br><span class=\"line\">\t\treturn;  </span><br><span class=\"line\">\t&#125;); </span><br><span class=\"line\">&#125; </span><br><span class=\"line\">\telse</span><br><span class=\"line\">\t&#123; </span><br><span class=\"line\">\t\taccelerometer_data.stopNotifications()  </span><br><span class=\"line\">\t\t\t.then(_ &#x3D;&gt; &#123;  </span><br><span class=\"line\">\t\t\tconsole.log(&#39;accelerometer notificaions stopped&#39;); </span><br><span class=\"line\">\t\t\tsetNotificationsStatus(false); </span><br><span class=\"line\">\t\t\taccelerometer_data.removeEventListener(&#39;characteristicvaluechanged&#39;, onAccelerometerData); </span><br><span class=\"line\">\t\t&#125;)   </span><br><span class=\"line\">\t\t\t.catch(error &#x3D;&gt; &#123;  </span><br><span class=\"line\">\t\t\tconsole.log(&#39;Could not stop accelerometer_data notifications: &#39; + error);  </span><br><span class=\"line\">\t\t&#125;); </span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&lt;&#x2F;script&gt;</span><br><span class=\"line\">&lt;&#x2F;head&gt;</span><br><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\">    &lt;h2&gt; Status&lt;&#x2F;h2&gt;</span><br><span class=\"line\">&lt;table border&#x3D;&quot;1&quot;&gt;</span><br><span class=\"line\">  &lt;tr&gt; &lt;!--表格的第一行 --&gt;</span><br><span class=\"line\">    &lt;td&gt;&lt;b&gt;Connected&lt;&#x2F;b&gt;&lt;&#x2F;td&gt;</span><br><span class=\"line\">    &lt;td&gt;&lt;b&gt;Service Discovery Completed&lt;&#x2F;b&gt;&lt;&#x2F;td&gt;</span><br><span class=\"line\">\t  &lt;td&gt;     &lt;b&gt;Notifications&lt;&#x2F;b&gt;    &lt;&#x2F;td&gt;</span><br><span class=\"line\">  &lt;&#x2F;tr&gt;</span><br><span class=\"line\">  &lt;tr&gt; &lt;!--表格的第二行 --&gt;</span><br><span class=\"line\">    &lt;td id&#x3D;&quot;status_connected&quot;&gt; false &lt;&#x2F;td&gt;</span><br><span class=\"line\">    &lt;td id&#x3D;&quot;status_discovered&quot;&gt; false &lt;&#x2F;td&gt;</span><br><span class=\"line\">\t  &lt;td id&#x3D;&quot;status_notifications&quot;&gt;false&lt;&#x2F;td&gt;</span><br><span class=\"line\">  &lt;&#x2F;tr&gt;</span><br><span class=\"line\">&lt;&#x2F;table&gt;</span><br><span class=\"line\">&lt;h2&gt; Device Discovery  Or Disconnect &lt;!-- 扫描&#x2F;发现蓝牙设备 --&gt; </span><br><span class=\"line\">&lt;&#x2F;h2&gt;</span><br><span class=\"line\">&lt;button id&#x3D;&quot;btn_scan&quot; onclick&#x3D;&quot;discoverOrdisconnectDevices()&quot;&gt;Start scan&lt;&#x2F;button&gt;</span><br><span class=\"line\">&lt;hr&gt;</span><br><span class=\"line\">&lt;h2&gt;Reading and Writing&lt;&#x2F;h2&gt;</span><br><span class=\"line\">&lt;h3&gt;Write Characteristic - Randomise Lights&lt;&#x2F;h3&gt;</span><br><span class=\"line\">&lt;button id&#x3D;&quot;btn_write&quot; onclick&#x3D;&quot;randomLEDs()&quot;&gt;Randomise LEDs&lt;&#x2F;button&gt;</span><br><span class=\"line\">&lt;h3&gt;Read Characteristic - Model Number&lt;&#x2F;h3&gt; </span><br><span class=\"line\">&lt;button id&#x3D;&quot;btn_read&quot; onclick&#x3D;&quot;readModelNumber()&quot;&gt;Read Model Number&lt;&#x2F;button&gt; </span><br><span class=\"line\">&lt;div id&#x3D;&quot;model_number&quot;&gt;&lt;&#x2F;div&gt; </span><br><span class=\"line\">--------</span><br><span class=\"line\">&lt;&#x2F;body&gt;</span><br><span class=\"line\">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure></div>\n\n<p>并在上文倒数第三段添加按钮</p>\n<div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"PLAIN\"><figure class=\"iseeu highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;hr&gt;</span><br><span class=\"line\">\t&lt;h2&gt;Notifications - Accelerometer X, Y, Z&lt;&#x2F;h2&gt; </span><br><span class=\"line\">\t&lt;button id&#x3D;&quot;btn_notify&quot; onclick&#x3D;&quot;toggleAccelerometerNotifications()&quot;&gt;Toggle Notifications&lt;&#x2F;button&gt;  &lt;div id&#x3D;&quot;accelerometer_data&quot;&gt;&lt;&#x2F;div&gt;</span><br></pre></td></tr></table></figure></div>\n\n<p>然后我们连接micro bit板子，点击最后一个按钮，就可以看到X，Y，Z的值在不断变化。当我们举起板子的时候，它的值会有较大的变化</p>\n<p><img src=\"http://qcd8f6zpx.bkt.clouddn.com/11111.png\" alt=\"\"></p>\n","text":" [Figure] ","link":"","raw":null,"photos":[],"categories":[],"tags":[]},{"title":"BBC———读写特性","slug":"hello-world - BBC——读写特性","date":"2020-06-21T04:20:32.465Z","updated":"2020-06-21T04:55:35.577Z","comments":true,"pin":null,"path":"api/articles/hello-world - BBC——读写特性.json","excerpt":"","keywords":null,"cover":"http://qarz21mhq.bkt.clouddn.com/93.jpg","content":"<p><img src=\"http://qarz21mhq.bkt.clouddn.com/93.jpg\" alt=\"\"></p>\n<h2 id=\"1-读取BBC开发板的名称\"><a href=\"#1-读取BBC开发板的名称\" class=\"headerlink\" title=\"1.读取BBC开发板的名称\"></a>1.读取BBC开发板的名称</h2><p>代码如下：</p>\n<div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"PLAIN\"><figure class=\"iseeu highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">function readModelNumber() </span><br><span class=\"line\">&#123;  </span><br><span class=\"line\">    console.log(&quot;readModelNumber&quot;);   </span><br><span class=\"line\">    &#x2F;&#x2F; state validation   </span><br><span class=\"line\">    if (!connected) </span><br><span class=\"line\">    &#123;     </span><br><span class=\"line\">        alert(&quot;Error: Discover and connect to a device before using this function&quot;);     </span><br><span class=\"line\">        return;   </span><br><span class=\"line\">    &#125;   </span><br><span class=\"line\">    if (!services_discovered) </span><br><span class=\"line\">    &#123;     </span><br><span class=\"line\">        alert(&quot;Error: Service discovery has not yet completed&quot;);     </span><br><span class=\"line\">        return;   </span><br><span class=\"line\">    &#125;    </span><br><span class=\"line\">    if (!has_device_information_service) </span><br><span class=\"line\">    &#123;     </span><br><span class=\"line\">        alert(&quot;Error: The connected device does not contain the device information service&quot;);     </span><br><span class=\"line\">        return;   </span><br><span class=\"line\">    &#125;   </span><br><span class=\"line\">    if (!has_model_name_string) </span><br><span class=\"line\">    &#123;     </span><br><span class=\"line\">        alert(&quot;Error: The connected device does not contain the model name string characteristic&quot;);     </span><br><span class=\"line\">        return;   </span><br><span class=\"line\">    &#125;   </span><br><span class=\"line\">    </span><br><span class=\"line\">    model_number_string.readValue()  </span><br><span class=\"line\">    .then(value &#x3D;&gt; &#123;   </span><br><span class=\"line\">        data &#x3D; new Uint8Array(value.buffer);   </span><br><span class=\"line\">        model_number_string &#x3D; new TextDecoder(&quot;utf-8&quot;).decode(data);  </span><br><span class=\"line\">        console.log(model_number_string);   </span><br><span class=\"line\">        document.getElementById(&quot;model_number&quot;).innerHTML &#x3D; model_number_string;  </span><br><span class=\"line\">        &#125;)  </span><br><span class=\"line\">    .catch(error &#x3D;&gt; &#123;  </span><br><span class=\"line\">        console.log(&#39;Error: &#39; + error);   </span><br><span class=\"line\">        alert(&#39;Error: &#39; + error);   </span><br><span class=\"line\">        return;  </span><br><span class=\"line\">        &#125;); </span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure></div>\n\n<p>并在<head>&lt;\\head&gt;中添加按钮</p>\n<div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"PLAIN\"><figure class=\"iseeu highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;h3&gt;Read Characteristic - Model number&lt;&#x2F;h3&gt;  </span><br><span class=\"line\">        &lt;button id&#x3D;&quot;btn_read&quot; onclick&#x3D;&quot;readModelNumber()&quot;&gt;Read Model number&lt;&#x2F;button&gt;</span><br></pre></td></tr></table></figure></div>\n\n<p>代码运行不报错后，用谷歌浏览器打开</p>\n<p>先连接自己的板子</p>\n<p>随后可以看到</p>\n<p><img src=\"http://qarz21mhq.bkt.clouddn.com/20200621124040.png\" alt=\"\"></p>\n<h2 id=\"2-网页控制开发板的亮灭\"><a href=\"#2-网页控制开发板的亮灭\" class=\"headerlink\" title=\"2.网页控制开发板的亮灭\"></a>2.网页控制开发板的亮灭</h2><p>我们添加函数</p>\n<div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"PLAIN\"><figure class=\"iseeu highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">function randomLEDs()   &#x2F;&#x2F;第6课上添加</span><br><span class=\"line\">       &#123;  </span><br><span class=\"line\">           console.log(&quot;randomLEDs&quot;);   </span><br><span class=\"line\">           &#x2F;&#x2F; state validation   </span><br><span class=\"line\">           if (!connected) </span><br><span class=\"line\">           &#123;     </span><br><span class=\"line\">               alert(&quot;Error: Discover and connect to a device before using this function&quot;);     </span><br><span class=\"line\">               return;   </span><br><span class=\"line\">           &#125;   </span><br><span class=\"line\">           if (!services_discovered) </span><br><span class=\"line\">           &#123;     </span><br><span class=\"line\">               alert(&quot;Error: Service discovery has not yet completed&quot;);     </span><br><span class=\"line\">               return;  </span><br><span class=\"line\">           &#125;   </span><br><span class=\"line\">           if (!has_led_service) </span><br><span class=\"line\">           &#123;     </span><br><span class=\"line\">               alert(&quot;Error: The connected device does not contain the LED service&quot;);     </span><br><span class=\"line\">               return;  </span><br><span class=\"line\">           &#125;   </span><br><span class=\"line\">           if (!has_led_matrix_state) </span><br><span class=\"line\">           &#123;      </span><br><span class=\"line\">               alert(&quot;Error: The connected device does not contain the LED matrix state characteristic&quot;);      </span><br><span class=\"line\">               return;   </span><br><span class=\"line\">           &#125;   </span><br><span class=\"line\">           var led_array &#x3D; [0, 0, 0, 0, 0];   </span><br><span class=\"line\"></span><br><span class=\"line\">            &#x2F;&#x2F; Math.random():0~1  Math.floor(x):返回小于等于x的最大整数</span><br><span class=\"line\">           led_array[0] &#x3D; Math.floor(Math.random() * 32);  </span><br><span class=\"line\">           led_array[1] &#x3D; 1;   </span><br><span class=\"line\">           led_array[2] &#x3D; 2;   </span><br><span class=\"line\">           led_array[3] &#x3D; 3;   </span><br><span class=\"line\">           led_array[4] &#x3D; 4;</span><br><span class=\"line\">           var led_matrix_data &#x3D; new Uint8Array(led_array); </span><br><span class=\"line\"></span><br><span class=\"line\">           led_matrix_state.writeValue(led_matrix_data.buffer)</span><br><span class=\"line\">           .then(_ &#x3D;&gt; &#123;   </span><br><span class=\"line\">               console.log(&#39;LED matrix state changed&#39;);  </span><br><span class=\"line\">               &#125;)  </span><br><span class=\"line\">           .catch(error &#x3D;&gt; &#123;   </span><br><span class=\"line\">               console.log(&#39;Error: &#39; + error);   </span><br><span class=\"line\">               alert(&#39;Error: &#39; + error);   return;  </span><br><span class=\"line\">               &#125;); </span><br><span class=\"line\">       &#125;</span><br></pre></td></tr></table></figure></div>\n\n<p>其中led_array[0]~led_array[4]分别对应了5行小灯 </p>\n","text":" [Figure] 其中led_array[0]~led_array[4]分别对应了5行小灯 ","link":"","raw":null,"photos":[],"categories":[],"tags":[]},{"title":"BBC———服务与特性","slug":"hello-world - BBC——温度服务特性","date":"2020-06-19T01:38:53.757Z","updated":"2020-06-19T08:18:37.515Z","comments":true,"pin":null,"path":"api/articles/hello-world - BBC——温度服务特性.json","excerpt":"","keywords":null,"cover":"http://qarz21mhq.bkt.clouddn.com/93.jpg","content":"<p><img src=\"http://qarz21mhq.bkt.clouddn.com/93.jpg\" alt=\"\"></p>\n<h2 id=\"添加蓝牙服务与特性\"><a href=\"#添加蓝牙服务与特性\" class=\"headerlink\" title=\"添加蓝牙服务与特性\"></a>添加蓝牙服务与特性</h2><h3 id=\"首先定义变量\"><a href=\"#首先定义变量\" class=\"headerlink\" title=\"首先定义变量\"></a>首先定义变量</h3><div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"PLAIN\"><figure class=\"iseeu highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">var has_accelerometer_service &#x3D; false; </span><br><span class=\"line\">var has_accelerometer_data &#x3D; false; </span><br><span class=\"line\">var has_led_service &#x3D; false;</span><br><span class=\"line\">var has_temp_serve&#x3D;false;</span><br><span class=\"line\">var has_led_matrix_state &#x3D; false; </span><br><span class=\"line\">var has_device_information_service &#x3D; false;</span><br><span class=\"line\">var has_model_name_string &#x3D; false; </span><br><span class=\"line\">var has_temp_value &#x3D;false;</span><br></pre></td></tr></table></figure></div>\n\n<h3 id=\"其次进行赋值\"><a href=\"#其次进行赋值\" class=\"headerlink\" title=\"其次进行赋值\"></a>其次进行赋值</h3><div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"PLAIN\"><figure class=\"iseeu highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#x2F;&#x2F; service UUIDs </span><br><span class=\"line\">TEMP_SERVE&#x3D;E95D6100251D470AA062FA1922DFA9A8;</span><br><span class=\"line\">ACCELEROMETER_SERVICE &#x3D; &#39;e95d0753-251d-470a-a062-fa1922dfa9a8&#39;; </span><br><span class=\"line\">LED_SERVICE &#x3D; &#39;e95dd91d-251d-470a-a062-fa1922dfa9a8&#39;; </span><br><span class=\"line\">DEVICE_INFORMATION_SERVICE &#x3D; &#39;0000180a-0000-1000-8000-00805f9b34fb&#39;;</span><br><span class=\"line\">TEMPERATURE_SERVICE &#x3D;&#39;e95d6100-251d-470a-a062-fa1922dfa9a8&#39;; </span><br><span class=\"line\"></span><br><span class=\"line\">&#x2F;&#x2F; characteristic UUIDs </span><br><span class=\"line\">TEMP_VALUE&#x3D;E95D6100251D470AA062FA1922DFA9A8;</span><br><span class=\"line\">ACCELEROMETER_DATA &#x3D; &#39;e95dca4b-251d-470a-a062-fa1922dfa9a8&#39;; </span><br><span class=\"line\">LED_MATRIX_STATE  &#x3D; &#39;e95d7b77-251d-470a-a062-fa1922dfa9a8&#39;; </span><br><span class=\"line\">LED_TEXT&#x3D;&#39;e95d93ee-251d-470a-a062-fa1922dfa9a8&#39;  &#x2F;&#x2F;新加的led_text特性相关语句</span><br></pre></td></tr></table></figure></div>\n\n<p>其中，TEMP_SERVE的值</p>\n<p>可以在<a href=\"https://lancaster-university.github.io/microbit-docs/resources/bluetooth/bluetooth_profile.html\" target=\"_blank\" rel=\"noopener\">https://lancaster-university.github.io/microbit-docs/resources/bluetooth/bluetooth_profile.html</a>  网页中进行搜索</p>\n<p>键盘按住 ctrl+f 并回车 ，搜素框中输入temperature service，就能看见uuid号</p>\n<p><img src=\"http://qarz21mhq.bkt.clouddn.com/20200619103450.png\" alt=\"\"></p>\n<h3 id=\"然后添加条件判断\"><a href=\"#然后添加条件判断\" class=\"headerlink\" title=\"然后添加条件判断\"></a>然后添加条件判断</h3><div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"PLAIN\"><figure class=\"iseeu highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">services.forEach(service &#x3D;&gt; </span><br><span class=\"line\">&#123;     </span><br><span class=\"line\">\tif (service.uuid &#x3D;&#x3D; ACCELEROMETER_SERVICE)</span><br><span class=\"line\">    &#123;      </span><br><span class=\"line\">    \thas_accelerometer_service &#x3D; true;    </span><br><span class=\"line\">     &#125;   </span><br><span class=\"line\">     if (service.uuid &#x3D;&#x3D; LED_SERVICE) </span><br><span class=\"line\">     &#123;      </span><br><span class=\"line\">         has_led_service &#x3D; true;     </span><br><span class=\"line\">     &#125;     </span><br><span class=\"line\">     if (service.uuid &#x3D;&#x3D; DEVICE_INFORMATION_SERVICE) </span><br><span class=\"line\">     &#123;      </span><br><span class=\"line\">          has_device_information_service &#x3D; true;     </span><br><span class=\"line\">      &#125; </span><br><span class=\"line\">      if (service.uuid &#x3D;&#x3D; TEMPERATURE_SERVICE) &#x2F;&#x2F;温度</span><br><span class=\"line\">      &#123;      </span><br><span class=\"line\">           has_temperature_service &#x3D; true;     </span><br><span class=\"line\">\t  &#125;</span><br></pre></td></tr></table></figure></div>\n\n<h3 id=\"再进行修改特性\"><a href=\"#再进行修改特性\" class=\"headerlink\" title=\"再进行修改特性\"></a>再进行修改特性</h3><div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"PLAIN\"><figure class=\"iseeu highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">if (characteristic.uuid &#x3D;&#x3D; TEMP_VALUE) </span><br><span class=\"line\">&#123;        </span><br><span class=\"line\">\ttemp_data &#x3D;characteristic;        </span><br><span class=\"line\">\thas_temp_value &#x3D; true;       </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></div>\n\n<h2 id=\"关于温度服务\"><a href=\"#关于温度服务\" class=\"headerlink\" title=\"关于温度服务\"></a>关于温度服务</h2><h3 id=\"打开网址https-makecode-microbit-org-89975-20684-84568-20127\"><a href=\"#打开网址https-makecode-microbit-org-89975-20684-84568-20127\" class=\"headerlink\" title=\"打开网址https://makecode.microbit.org/89975-20684-84568-20127\"></a>打开网址<a href=\"https://makecode.microbit.org/89975-20684-84568-20127\" target=\"_blank\" rel=\"noopener\">https://makecode.microbit.org/89975-20684-84568-20127</a></h3><p><img src=\"http://qarz21mhq.bkt.clouddn.com/20200619152624.png\" alt=\"\"></p>\n<h3 id=\"点击蓝牙led服务-点击下载\"><a href=\"#点击蓝牙led服务-点击下载\" class=\"headerlink\" title=\"点击蓝牙led服务   点击下载\"></a>点击蓝牙led服务   点击下载</h3><p><img src=\"http://qarz21mhq.bkt.clouddn.com/20200619153353.png\" alt=\"\"></p>\n<h3 id=\"把下载后的文件拖到存储盘里\"><a href=\"#把下载后的文件拖到存储盘里\" class=\"headerlink\" title=\"把下载后的文件拖到存储盘里\"></a>把下载后的文件拖到存储盘里</h3><h3 id=\"然后以谷歌浏览器方式打开代码文件\"><a href=\"#然后以谷歌浏览器方式打开代码文件\" class=\"headerlink\" title=\"然后以谷歌浏览器方式打开代码文件\"></a>然后以谷歌浏览器方式打开代码文件</h3><h3 id=\"右击检查-如下表示成功了\"><a href=\"#右击检查-如下表示成功了\" class=\"headerlink\" title=\"右击检查  如下表示成功了\"></a>右击检查  如下表示成功了</h3><p><img src=\"http://qarz21mhq.bkt.clouddn.com/122.png\" alt=\"\"></p>\n","text":" [Figure] ","link":"","raw":null,"photos":[],"categories":[],"tags":[]},{"title":"BBC———设备连接","slug":"hello-world - BBC——设备连接","date":"2020-06-16T11:36:49.397Z","updated":"2020-06-19T06:50:09.098Z","comments":true,"pin":null,"path":"api/articles/hello-world - BBC——设备连接.json","excerpt":"","keywords":null,"cover":"http://qarz21mhq.bkt.clouddn.com/93.jpg","content":"<p><img src=\"http://qarz21mhq.bkt.clouddn.com/93.jpg\" alt=\"\"></p>\n<h2 id=\"准备工作：\"><a href=\"#准备工作：\" class=\"headerlink\" title=\"准备工作：\"></a>准备工作：</h2><p>1.在本机上打开蓝牙</p>\n<p>可以在谷歌浏览器中输入“Chrome://bluetooth-internals”</p>\n<p>Adapter 中查看是否打开</p>\n<p><img src=\"http://qarz21mhq.bkt.clouddn.com/90.png\" alt=\"\"></p>\n<p>显示这样表示成功</p>\n<p>2.下载Visual Studio Code软件，用于编写代码</p>\n<h2 id=\"扫描和搜索功能\"><a href=\"#扫描和搜索功能\" class=\"headerlink\" title=\"扫描和搜索功能\"></a>扫描和搜索功能</h2><p>首先要添加变量的定义</p>\n<div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"PLAIN\"><figure class=\"iseeu highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">var    selected_device;</span><br><span class=\"line\">        var    selected_server;</span><br><span class=\"line\">        var    connected&#x3D;false;</span><br></pre></td></tr></table></figure></div>\n\n<p>其次加入代码</p>\n<div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"PLAIN\"><figure class=\"iseeu highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">function discoverDevices()</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">          console.log(&quot;discoverDevices&quot;);</span><br><span class=\"line\">          var options &#x3D; &#123;acceptAllDevices:true&#125;</span><br><span class=\"line\">          navigator.bluetooth.requestDevice(options)</span><br><span class=\"line\">          .then(device &#x3D;&gt; &#123;</span><br><span class=\"line\">              console.log(&#39;&gt; Name:&#39; + device.name);</span><br><span class=\"line\">              console.log(&#39;&gt; Id:&#39; + device.id);</span><br><span class=\"line\">              console.log(&#39;&gt; Connected:&#39; + device.gatt.connected);</span><br><span class=\"line\">              selected_device &#x3D; device;</span><br><span class=\"line\">              console.log(selected_device);</span><br><span class=\"line\">              connect();</span><br><span class=\"line\">          &#125;)</span><br><span class=\"line\">          .catch(error &#x3D;&gt; &#123;</span><br><span class=\"line\">              alert(&#39;ERROR&#39; +error);</span><br><span class=\"line\">              console.log(&#39;ERROR&#39; +error);</span><br><span class=\"line\">          &#125;)</span><br><span class=\"line\">      &#125;</span><br></pre></td></tr></table></figure></div>\n\n<p>程序运行没有错误后</p>\n<p>把自己的代码文件用谷歌浏览器打开</p>\n<p>点击 Start scan</p>\n<p>如果显示如下，表示扫描和搜索功能成功</p>\n<p><img src=\"http://qarz21mhq.bkt.clouddn.com/91.png\" alt=\"\"></p>\n<h2 id=\"连接和断开功能\"><a href=\"#连接和断开功能\" class=\"headerlink\" title=\"连接和断开功能\"></a>连接和断开功能</h2><p>在前面的代码上添加如下代码</p>\n<div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"PLAIN\"><figure class=\"iseeu highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">function connect()</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            console.log(&quot;connecting&quot;);</span><br><span class=\"line\">            selected_device.gatt.connect()</span><br><span class=\"line\">            .then(</span><br><span class=\"line\">                function (server)</span><br><span class=\"line\">                &#123;</span><br><span class=\"line\">                    console.log(&quot;Connected to&quot; + server.device.id);</span><br><span class=\"line\">                    console.log(&quot;Connected &quot; + server.connected); </span><br><span class=\"line\">                    connected_server &#x3D;server;</span><br><span class=\"line\">                &#125;,</span><br><span class=\"line\">                function (error)</span><br><span class=\"line\">                &#123;</span><br><span class=\"line\">                    console.log(&quot;ERROR:could not connct-&quot; + error);</span><br><span class=\"line\">                   alert(&quot;ERROR:could not connct-&quot; + error);</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            );</span><br><span class=\"line\">        &#125;</span><br></pre></td></tr></table></figure></div>\n\n<p>同样用Chrome浏览器打开自己的代码文件</p>\n<p>如果开发板小灯显示C则表示连接成功</p>\n","text":" [Figure] 同样用Chrome浏览器打开自己的代码文件如果开发板小灯显示C则表示连接成功","link":"","raw":null,"photos":[],"categories":[],"tags":[]},{"title":"绑定域名","slug":"hello-world - 绑定云服务器","date":"2020-05-30T03:52:45.803Z","updated":"2020-05-30T03:52:12.304Z","comments":true,"pin":null,"path":"api/articles/hello-world - 绑定云服务器.json","excerpt":"","keywords":null,"cover":"http://qarz21mhq.bkt.clouddn.com/62.jpg","content":"<p><img src=\"http://qarz21mhq.bkt.clouddn.com/62.jpg\" alt=\"\"></p>\n<h4 id=\"云服务购买之后\"><a href=\"#云服务购买之后\" class=\"headerlink\" title=\"云服务购买之后\"></a>云服务购买之后</h4><h4 id=\"登录github\"><a href=\"#登录github\" class=\"headerlink\" title=\"登录github\"></a>登录github</h4><h4 id=\"右上角setings\"><a href=\"#右上角setings\" class=\"headerlink\" title=\"右上角setings\"></a>右上角setings</h4><h4 id=\"在此处把你已经购买的域名网址填入\"><a href=\"#在此处把你已经购买的域名网址填入\" class=\"headerlink\" title=\"在此处把你已经购买的域名网址填入\"></a>在此处把你已经购买的域名网址填入</h4><p><img src=\"http://qarz21mhq.bkt.clouddn.com/81.png\" alt=\"\"></p>\n<h4 id=\"看到打勾就表明成功\"><a href=\"#看到打勾就表明成功\" class=\"headerlink\" title=\"看到打勾就表明成功\"></a>看到打勾就表明成功</h4><p><img src=\"http://qarz21mhq.bkt.clouddn.com/82.png\" alt=\"\"></p>\n","text":" [Figure] ","link":"","raw":null,"photos":[],"categories":[],"tags":[]},{"title":"关于amber主题的评论功能","slug":"hello-world - 关于amber主题的评论功能","date":"2020-05-30T03:13:03.564Z","updated":"2020-05-30T03:12:10.851Z","comments":true,"pin":null,"path":"api/articles/hello-world - 关于amber主题的评论功能.json","excerpt":"","keywords":null,"cover":"http://qarz21mhq.bkt.clouddn.com/61.jpg","content":"<p><img src=\"http://qarz21mhq.bkt.clouddn.com/61.jpg\" alt=\"\"></p>\n<h4 id=\"我们打开themes-amber-就能看到“-config-yml”\"><a href=\"#我们打开themes-amber-就能看到“-config-yml”\" class=\"headerlink\" title=\"我们打开themes-amber 就能看到“_config.yml”\"></a>我们打开themes-amber 就能看到“_config.yml”</h4><h4 id=\"将comments下的engine值修改为valine\"><a href=\"#将comments下的engine值修改为valine\" class=\"headerlink\" title=\"将comments下的engine值修改为valine\"></a>将comments下的engine值修改为valine</h4><p><img src=\"http://qarz21mhq.bkt.clouddn.com/72.png\" alt=\"\"></p>\n<h4 id=\"访问官网进行注册\"><a href=\"#访问官网进行注册\" class=\"headerlink\" title=\"访问官网进行注册\"></a>访问官网进行注册</h4><p><img src=\"http://qarz21mhq.bkt.clouddn.com/71.png\" alt=\"\"></p>\n<h4 id=\"获取ID和key\"><a href=\"#获取ID和key\" class=\"headerlink\" title=\"获取ID和key\"></a>获取ID和key</h4><p><img src=\"http://qarz21mhq.bkt.clouddn.com/73.png\" alt=\"\"></p>\n<h4 id=\"在此处把相应的值更改\"><a href=\"#在此处把相应的值更改\" class=\"headerlink\" title=\"在此处把相应的值更改\"></a>在此处把相应的值更改</h4><p><img src=\"http://qarz21mhq.bkt.clouddn.com/74.jpg\" alt=\"\"></p>\n","text":" [Figure] ","link":"","raw":null,"photos":[],"categories":[],"tags":[]},{"title":"眠月站","slug":"hello-world - 眠月站","date":"2020-05-30T02:54:12.312Z","updated":"2020-05-24T06:19:03.201Z","comments":true,"pin":null,"path":"api/articles/hello-world - 眠月站.json","excerpt":"","keywords":null,"cover":"http://qarz21mhq.bkt.clouddn.com/1.jpg","content":"<h4 id=\"————有情所喜，是险所在，有情所怖，是苦所在，当行梵行，舍离于有。\"><a href=\"#————有情所喜，是险所在，有情所怖，是苦所在，当行梵行，舍离于有。\" class=\"headerlink\" title=\"————有情所喜，是险所在，有情所怖，是苦所在，当行梵行，舍离于有。\"></a><em>————有情所喜，是险所在，有情所怖，是苦所在，当行梵行，舍离于有。</em></h4><h4 id=\"————自说经难陀品世间经\"><a href=\"#————自说经难陀品世间经\" class=\"headerlink\" title=\"————自说经难陀品世间经\"></a>————自说经难陀品世间经</h4><h4 id=\"1\"><a href=\"#1\" class=\"headerlink\" title=\"1\"></a>1</h4><h4 id=\"从来没有想到会有这样寂静的山林。\"><a href=\"#从来没有想到会有这样寂静的山林。\" class=\"headerlink\" title=\"从来没有想到会有这样寂静的山林。\"></a>从来没有想到会有这样寂静的山林。</h4><h4 id=\"从来也没有想到，会有这样寂静这样无所欲求的心情。\"><a href=\"#从来也没有想到，会有这样寂静这样无所欲求的心情。\" class=\"headerlink\" title=\"从来也没有想到，会有这样寂静这样无所欲求的心情。\"></a>从来也没有想到，会有这样寂静这样无所欲求的心情。</h4><h4 id=\"原本我们可以从溜走的岁月里学到这么多的东西。\"><a href=\"#原本我们可以从溜走的岁月里学到这么多的东西。\" class=\"headerlink\" title=\"原本我们可以从溜走的岁月里学到这么多的东西。\"></a>原本我们可以从溜走的岁月里学到这么多的东西。</h4><p><img src=\"http://qarz21mhq.bkt.clouddn.com/1.jpg\" alt=\"s\"></p>\n<h4 id=\"2\"><a href=\"#2\" class=\"headerlink\" title=\"2\"></a>2</h4><h4 id=\"是丽日晴空的一天，森林中有这汪澄明如玉的水库。\"><a href=\"#是丽日晴空的一天，森林中有这汪澄明如玉的水库。\" class=\"headerlink\" title=\"是丽日晴空的一天，森林中有这汪澄明如玉的水库。\"></a>是丽日晴空的一天，森林中有这汪澄明如玉的水库。</h4><h4 id=\"静看这水中深深浅浅的倒影，好似这光影斑驳的岁月。\"><a href=\"#静看这水中深深浅浅的倒影，好似这光影斑驳的岁月。\" class=\"headerlink\" title=\"静看这水中深深浅浅的倒影，好似这光影斑驳的岁月。\"></a>静看这水中深深浅浅的倒影，好似这光影斑驳的岁月。</h4><p><img src=\"http://qarz21mhq.bkt.clouddn.com/2.jpg\" alt=\"p\"></p>\n<h4 id=\"3\"><a href=\"#3\" class=\"headerlink\" title=\"3\"></a>3</h4><h4 id=\"小径的两旁漫生着野花，细致的草本是一些细致而又知足的灵魂。\"><a href=\"#小径的两旁漫生着野花，细致的草本是一些细致而又知足的灵魂。\" class=\"headerlink\" title=\"小径的两旁漫生着野花，细致的草本是一些细致而又知足的灵魂。\"></a>小径的两旁漫生着野花，细致的草本是一些细致而又知足的灵魂。</h4><p><img src=\"http://qarz21mhq.bkt.clouddn.com/3.jpg\" alt=\"\"></p>\n<h4 id=\"4\"><a href=\"#4\" class=\"headerlink\" title=\"4\"></a>4</h4><h4 id=\"雾在林间流动，整座山峦都静卧在雾色之中，我在眠月站前停了下来。\"><a href=\"#雾在林间流动，整座山峦都静卧在雾色之中，我在眠月站前停了下来。\" class=\"headerlink\" title=\"雾在林间流动，整座山峦都静卧在雾色之中，我在眠月站前停了下来。\"></a>雾在林间流动，整座山峦都静卧在雾色之中，我在眠月站前停了下来。</h4><h4 id=\"火车站在时光里。\"><a href=\"#火车站在时光里。\" class=\"headerlink\" title=\"火车站在时光里。\"></a>火车站在时光里。</h4><h4 id=\"铁轨依旧，月台依旧。\"><a href=\"#铁轨依旧，月台依旧。\" class=\"headerlink\" title=\"铁轨依旧，月台依旧。\"></a>铁轨依旧，月台依旧。</h4><p><img src=\"http://qarz21mhq.bkt.clouddn.com/4.jpg\" alt=\"\"></p>\n","text":"————有情所喜，是险所在，有情所怖，是苦所在，当行梵行，舍离于有。————自说经难陀品世间经1从来没有想到会有这样寂静的山林。从来也没有想到，会有这样寂静这样无所欲求的心情。原本我们可以从溜走的岁月里学到这么多的东西。 [Figure] ","link":"","raw":null,"photos":[],"categories":[],"tags":[]},{"title":"一棵开花的树","slug":"hello-world - 一棵开花的树","date":"2020-05-30T02:54:12.297Z","updated":"2020-05-29T11:58:48.326Z","comments":true,"pin":null,"path":"api/articles/hello-world - 一棵开花的树.json","excerpt":"","keywords":null,"cover":"http://qarz21mhq.bkt.clouddn.com/5.png","content":"<h4 id=\"如何让你遇见我\"><a href=\"#如何让你遇见我\" class=\"headerlink\" title=\"如何让你遇见我\"></a><em>如何让你遇见我</em></h4><h4 id=\"在我最美丽的时刻-为这\"><a href=\"#在我最美丽的时刻-为这\" class=\"headerlink\" title=\"在我最美丽的时刻 为这\"></a>在我最美丽的时刻 为这</h4><h4 id=\"我已在佛前-求了五百年\"><a href=\"#我已在佛前-求了五百年\" class=\"headerlink\" title=\"我已在佛前 求了五百年\"></a>我已在佛前 求了五百年</h4><h4 id=\"求它让我们结一段尘缘\"><a href=\"#求它让我们结一段尘缘\" class=\"headerlink\" title=\"求它让我们结一段尘缘\"></a>求它让我们结一段尘缘</h4><p><img src=\"http://qarz21mhq.bkt.clouddn.com/5.png\" alt=\"\"></p>\n<h4 id=\"佛于是把我化作一棵树\"><a href=\"#佛于是把我化作一棵树\" class=\"headerlink\" title=\"佛于是把我化作一棵树\"></a>佛于是把我化作一棵树</h4><h4 id=\"长在你必经的路旁\"><a href=\"#长在你必经的路旁\" class=\"headerlink\" title=\"长在你必经的路旁\"></a>长在你必经的路旁</h4><h4 id=\"阳光下慎重地开满了花\"><a href=\"#阳光下慎重地开满了花\" class=\"headerlink\" title=\"阳光下慎重地开满了花\"></a>阳光下<font color=\"#ffe5e5\">慎</font><font color=\"#ffcccc\">重</font><font color=\"#ffb3b3\">地</font><font color=\"#e60000\">开</font><font color=\"#ff1a1a\">满</font><font color=\"#ff4d4d\">了</font><font color=\"#ff8080\">花</font></h4><h4 id=\"朵朵是我前世的盼望\"><a href=\"#朵朵是我前世的盼望\" class=\"headerlink\" title=\"朵朵是我前世的盼望\"></a>朵朵是我前世的盼望</h4>","text":"如何让你遇见我在我最美丽的时刻 为这我已在佛前 求了五百年求它让我们结一段尘缘 [Figure] 佛于是把我化作一棵树长在你必经的路旁阳光下慎重地开满了花朵朵是我前世的盼望","link":"","raw":null,"photos":[],"categories":[],"tags":[]}]}